<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Mecánica General | GP Graders</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root{
      --bg0:#070e18;
      --bg2:#0f1e33;

      --panel: rgba(255,255,255,.04);
      --panel2: rgba(0,0,0,.18);
      --stroke: rgba(255,255,255,.10);

      --text:#eaf1ff;
      --muted:#b9c6e3;

      --brand:#4da3ff;
      --brand2:#38d4ff;

      --shadow: 0 16px 50px rgba(0,0,0,.45);
      --shadow2: 0 22px 70px rgba(0,0,0,.50);

      --r:16px;
      --r20:20px;
    }

    *{ box-sizing:border-box; }
    html, body{ min-height:100%; }

    body{
      margin:0;
      font-family:"Segoe UI", Tahoma, sans-serif;
      color:var(--text);

      /* ✅ Fondo global infinito */
      background:
        radial-gradient(1200px 800px at 10% 10%, rgba(77,163,255,.18), transparent 60%),
        radial-gradient(1200px 900px at 90% 90%, rgba(56,212,255,.12), transparent 55%),
        linear-gradient(135deg, var(--bg0), var(--bg2));
      background-attachment: fixed;

      overflow-x:hidden;
    }

    /* ✅ Glow animado (no se corta) */
    body::before{
      content:"";
      position:fixed;
      inset:-40px;
      pointer-events:none;
      background:
        radial-gradient(520px 320px at 18% 18%, rgba(77,163,255,.14), transparent 62%),
        radial-gradient(520px 320px at 85% 82%, rgba(56,212,255,.10), transparent 64%);
      opacity:.95;
      animation: bgFloat 10s ease-in-out infinite alternate;
      z-index:0;
    }
    @keyframes bgFloat{
      from{ transform: translate3d(-10px,-6px,0) scale(1); }
      to  { transform: translate3d(10px,8px,0) scale(1.02); }
    }

    /* Header */
    header{
      position:sticky;
      top:0;
      z-index:10;
      background:rgba(8,14,24,.90);
      border-bottom:1px solid rgba(255,255,255,.08);
      backdrop-filter: blur(10px);
      transform: translateY(-6px);
      opacity:0;
      animation: fadeDown .45s ease forwards;
    }
    @keyframes fadeDown{ to{ transform: translateY(0); opacity:1; } }

    header .wrap{
      max-width:1100px;
      margin:auto;
      padding:14px 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    header h1{ margin:0; font-size:16px; }
    header span{ font-size:12px; color:var(--muted); }

    /* Layout */
    main{
      max-width:1100px;
      margin:auto;
      padding:26px 18px 50px;
      position:relative;
      z-index:1; /* encima del glow */
    }

    footer{
      text-align:center;
      font-size:12px;
      color:rgba(255,255,255,.4);
      padding:20px;
      position:relative;
      z-index:1;
    }

    .section{ margin-top:34px; }
    .section-title{
      display:flex;
      align-items:center;
      gap:12px;
      margin-bottom:8px;
    }
    .bar{
      width:10px;
      height:22px;
      border-radius:8px;
      background:linear-gradient(180deg,var(--brand),var(--brand2));
      box-shadow: 0 10px 26px rgba(77,163,255,.10);
    }
    .section-title h2{ margin:0; font-size:18px; }
    .section-sub{
      font-size:13px;
      color:var(--muted);
      margin-bottom:18px;
      max-width:900px;
      line-height:1.65;
    }

    /* Buttons (formato hardware) */
    .btn{
      padding:9px 14px;
      border-radius:12px;
      text-decoration:none;
      font-weight:700;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.04);
      color:var(--text);
      cursor:pointer;
      transition: transform .15s ease, border-color .15s ease, box-shadow .15s ease, background .15s ease;
      position:relative;
      overflow:hidden;
      will-change: transform;
    }
    .btn::after{
      content:"";
      position:absolute;
      inset:0;
      background: radial-gradient(420px 140px at 10% 10%, rgba(77,163,255,.18), transparent 65%);
      opacity:0;
      transition: opacity .2s ease;
      pointer-events:none;
    }
    .btn:hover{
      border-color: rgba(77,163,255,.55);
      transform: translateY(-1px);
      box-shadow: 0 12px 30px rgba(0,0,0,.28);
      background: rgba(0,0,0,.10);
    }
    .btn:hover::after{ opacity:1; }
    .btn:active{ transform: translateY(0) scale(.99); }

    .btn.primary{
      border-color: rgba(77,163,255,.55);
      background: linear-gradient(180deg, rgba(77,163,255,.18), rgba(56,212,255,.12));
    }
    .btn.primary:hover{ border-color: rgba(77,163,255,.85); }

    .btn:focus-visible{
      outline:none;
      box-shadow: 0 0 0 6px rgba(77,163,255,.18);
      border-color: rgba(77,163,255,.65);
    }

    /* Card base (hardware style) */
    .card{
      background: var(--panel);
      border: 1px solid var(--stroke);
      border-radius: var(--r20);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
      will-change: transform;
      transition: transform .15s ease, border-color .15s ease, box-shadow .15s ease, filter .15s ease;
    }
    .card::before{
      content:"";
      position:absolute;
      inset:-1px;
      border-radius: inherit;
      background: radial-gradient(520px 220px at 10% 0%, rgba(77,163,255,.10), transparent 60%);
      opacity:0;
      transition: opacity .18s ease;
      pointer-events:none;
    }
    .card:hover{
      transform: translateY(-2px);
      border-color: rgba(77,163,255,.22);
      box-shadow: var(--shadow2);
      filter: saturate(1.03);
    }
    .card:hover::before{ opacity:1; }

    .card-h{
      padding:14px 16px;
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .card-h h3{ margin:0; font-size:14px; }
    .card-h .hint{ margin-top:4px; font-size:12px; color:var(--muted); }
    .card-b{
      padding: 14px 16px 16px;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.65;
    }

    /* Search (hardware style) */
    .search-wrap{
      margin-top:14px;
      background: var(--panel);
      border:1px solid var(--stroke);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      overflow: visible;
      transform: translateY(10px);
      opacity:0;
      transition: transform .55s ease, opacity .55s ease;
    }
    .search-wrap.reveal{ transform: translateY(0); opacity:1; }

    .search-head{
      padding:14px 16px;
      border-bottom:1px solid rgba(255,255,255,.10);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .search-head h3{ margin:0; font-size:14px; }
    .search-head .hint{ margin-top:4px; font-size:12px; color:var(--muted); }
    .search-body{ padding:14px 16px 16px; }
    .search-row{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }
    .search-suggest{ position:relative; flex:1; min-width:220px; }
    .search-input{
      width:100%;
      flex:1;
      min-width:220px;
      padding:12px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.22);
      color:var(--text);
      outline:none;
      transition: border-color .15s ease, box-shadow .15s ease, transform .15s ease;
    }
    .search-input:focus{
      border-color: rgba(77,163,255,.55);
      box-shadow: 0 0 0 6px rgba(77,163,255,.12);
      transform: translateY(-1px);
    }
    .search-meta{
      margin-top:10px;
      font-size:12px;
      color: rgba(230,237,245,.60);
    }

    /* highlight */
    mark.gp-hit{
      background: rgba(77,163,255,.25);
      border: 1px solid rgba(77,163,255,.35);
      color: var(--text);
      padding: 0 2px;
      border-radius: 6px;
      transition: box-shadow .2s ease, background .2s ease, border-color .2s ease;
    }
    mark.gp-hit.active{
      background: rgba(77,163,255,.45);
      border-color: rgba(77,163,255,.75);
      box-shadow: 0 0 0 6px rgba(77,163,255,.14);
      animation: popHit .28s ease;
    }
    @keyframes popHit{ from{ transform: scale(.98); } to{ transform: scale(1); } }

    /* Autocomplete list */
    .suggest-list{
      position:absolute;
      top: calc(100% + 8px);
      left:0; right:0;
      background: rgba(10,20,34,.98);
      border: 1px solid rgba(255,255,255,.14);
      border-radius: 14px;
      box-shadow: 0 18px 60px rgba(0,0,0,.55);
      overflow:hidden;
      z-index:999;
      max-height: 280px;
      overflow-y:auto;
      display:none;
      transform-origin: top;
      animation: drop .16s ease;
    }
    @keyframes drop{
      from{ transform: translateY(-6px) scale(.98); opacity:.4; }
      to{ transform: translateY(0) scale(1); opacity:1; }
    }
    .suggest-item{
      padding:10px 12px;
      cursor:pointer;
      border-top:1px solid rgba(255,255,255,.08);
      transition: background .12s ease, transform .12s ease;
    }
    .suggest-item:first-child{ border-top:none; }
    .suggest-item:hover,
    .suggest-item.active{ background: rgba(77,163,255,.12); transform: translateX(2px); }
    .suggest-title{ font-size:13px; color: rgba(230,237,245,.92); line-height:1.35; }
    .suggest-hi{
      background: rgba(77,163,255,.22);
      border: 1px solid rgba(77,163,255,.35);
      padding: 0 2px;
      border-radius: 6px;
    }

    /* Mecánica content blocks = cards grid (hardware style) */
    .mech-grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-top: 12px;
    }

    .mech-card{
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: var(--r);
      padding: 14px 14px 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,.22);
      position:relative;
      overflow:hidden;
    }
    .mech-card::before{
      content:"";
      position:absolute;
      inset:-1px;
      border-radius: inherit;
      background: radial-gradient(520px 180px at 10% 0%, rgba(77,163,255,.10), transparent 60%);
      opacity:0;
      transition: opacity .18s ease;
      pointer-events:none;
    }
    .mech-card:hover::before{ opacity:1; }

    .mech-card-title{
      margin:0 0 10px;
      font-size: .98rem;
      color: var(--text);
      letter-spacing:.2px;
    }
    .mech-text{
      margin: 10px 0;
      color: var(--muted);
      line-height: 1.65;
      font-size: 13px;
    }
    .mech-list{
      margin: 0;
      padding-left: 18px;
      color: var(--muted);
      line-height: 1.65;
      font-size: 13px;
    }
    .mech-list li{ margin: 8px 0; }
    .mech-list strong{ color: var(--text); font-weight: 600; }

    .mech-divider{
      border:none;
      height:1px;
      background: var(--stroke);
      margin: 14px 0;
      opacity:.9;
    }

    .callout{
      border: 1px solid rgba(77,163,255,.28);
      background: rgba(77,163,255,.08);
      border-radius: var(--r);
      padding: 12px 14px;
    }
    .callout h4{
      margin:0 0 8px;
      color: var(--text);
      font-size: .98rem;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.16);
      font-size:12px;
      color: rgba(230,237,245,.88);
      margin-bottom: 8px;
    }
    .badgeDot{ width:8px; height:8px; border-radius:999px; background: rgba(77,163,255,.85); }

    /* Images */
    .img-figure{
      width: 100%;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.12);
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
      display:block;
      margin: 12px auto 6px;
      cursor: zoom-in;
      transition: transform .18s ease, filter .18s ease, border-color .18s ease;
      background: rgba(0,0,0,.14);
    }
    .img-figure:hover{
      transform: scale(1.01);
      filter: saturate(1.03);
      border-color: rgba(77,163,255,.25);
    }
    .caption{
      margin: 0;
      font-size: 12px;
      color: rgba(255,255,255,.55);
      line-height: 1.45;
    }

    /* Width helpers */
    .w-xs{ max-width: 260px; }
    .w-s{ max-width: 420px; }
    .w-m{ max-width: 720px; }
    .w-l{ max-width: 920px; }

    /* Reveal animation for sections/cards */
    .revealItem{
      transform: translateY(10px);
      opacity: 0;
    }
    .revealItem.reveal{
      transform: translateY(0);
      opacity: 1;
      transition: transform .55s ease, opacity .55s ease;
    }

    /* Lightbox */
    .img-lightbox{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.85);
      backdrop-filter: blur(4px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 6000;
      cursor: zoom-out;
      opacity:0;
      transition: opacity .14s ease;
      padding: 16px;
    }
    .img-lightbox.open{
      display: flex;
      opacity:1;
    }
    .img-lightbox img{
      max-width: 92vw;
      max-height: 92vh;
      border-radius: 14px;
      box-shadow: 0 30px 80px rgba(0,0,0,.65);
      transform: translateY(8px) scale(.99);
      animation: lbIn .16s ease forwards;
      background: rgba(0,0,0,.10);
    }
    @keyframes lbIn{ to{ transform: translateY(0) scale(1); } }

    /* Responsive */
    @media (min-width: 860px){
      .mech-grid{ grid-template-columns: 1fr 1fr; }
      .mech-grid .span-2{ grid-column: 1 / -1; }
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      *{ animation:none !important; transition:none !important; }
      body::before{ display:none; }
      html{ scroll-behavior:auto; }
    }
  </style>
</head>

<body>

<header>
  <div class="wrap">
    <div>
      <h1>Mecánica General – GP Graders</h1>
      <span>Estructura física y sistemas de movimiento</span>
    </div>
    <a href="menu.html" class="btn">⬅ Volver al menú</a>
  </div>
</header>

<main>

  <!-- Lightbox global -->
  <div id="imgLightbox" class="img-lightbox" aria-hidden="true">
    <img id="imgLightboxImg" alt="">
  </div>

  <!-- BUSCADOR -->
  <section class="search-wrap revealItem" id="buscador">
    <div class="search-head">
      <div>
        <h3>Búsqueda rápida en el manual</h3>
        <div class="hint">Busca por palabra o frase y salta entre coincidencias</div>
      </div>
      <button class="btn" id="clearSearchBtn" type="button">Limpiar</button>
    </div>

    <div class="search-body">
      <div class="search-row">
        <div class="search-suggest">
          <input class="search-input" id="searchInput" type="text" autocomplete="off"
            placeholder="Ej: encoder, VFD, solenoide, retorno, carril...">
          <div class="suggest-list" id="suggestList"></div>
        </div>

        <button class="btn primary" id="searchBtn" type="button">Buscar</button>
        <button class="btn" id="prevBtn" type="button" aria-label="Anterior">◀</button>
        <button class="btn" id="nextBtn" type="button" aria-label="Siguiente">▶</button>
      </div>

      <div class="search-meta" id="searchMeta">Sin búsqueda activa.</div>
    </div>
  </section>

<!-- 1. INTRO -->
<section class="section revealItem" id="intro">
  <div class="section-title">
    <div class="bar"></div>
    <h2>1. Introducción a la mecánica del sistema</h2>
  </div>

  <p class="section-sub">
    Este apartado describe la infraestructura física y los componentes electromecánicos que hacen posible la operación
    estable de la clasificadora: <b>transporte</b>, <b>rotación</b>, <b>singulación</b>, <b>sincronización</b> y
    <b>expulsión</b>. En una línea de selección, la visión “decide”, pero la mecánica es la que <b>hace que esa decisión se cumpla</b>
    en el punto exacto.
  </p>

  <div class="mech-grid">
    <article class="mech-card">
      <h3 class="mech-card-title">Objetivo mecánico del sistema (qué debe garantizar sí o sí)</h3>
      <ul class="mech-list">
        <li><strong>Flujo continuo:</strong> evitar acumulaciones, rebalses y “olas” de producto que rompen el ritmo de lectura.</li>
        <li><strong>Rotación estable:</strong> la fruta debe girar de forma repetible para que la inspección sea consistente.</li>
        <li><strong>Posición repetible:</strong> la fruta debe viajar centrada y a velocidad constante para llegar al punto de expulsión.</li>
        <li><strong>Sincronía con encoder:</strong> cada acción mecánica (captura, decisión, expulsión) depende de tiempo/posición.</li>
        <li><strong>Evitar daño del fruto:</strong> golpes, cortes, pellizcos y caídas que afecten calidad o generen falsas detecciones.</li>
      </ul>
      <div class="callout" style="margin-top:12px;">
        <h4>Indicadores rápidos de “mecánica sana”</h4>
        <ul class="mech-list">
          <li><strong>La línea suena uniforme</strong> (sin “saltos” ni vibraciones periódicas).</li>
          <li><strong>La fruta mantiene carril</strong> (no rebota ni se cruza).</li>
          <li><strong>La tasa de retorno es baja y estable</strong> (no sube con el tiempo).</li>
        </ul>
      </div>
    </article>

    <article class="mech-card">
      <h3 class="mech-card-title">Sistema de transporte y posicionamiento (dónde se gana o se pierde la estabilidad)</h3>
      <ul class="mech-list">
        <li><strong>Rodillos (rollers):</strong> sostienen, transportan y generan rotación. Deben tener tracción uniforme y limpieza.</li>
        <li><strong>Guías laterales:</strong> centran el fruto; si están muy cerradas causan pellizcos/atascos, si están muy abiertas provocan cruces.</li>
        <li><strong>Cadena y ejes:</strong> transmiten el movimiento; desgaste o desalineación genera variación de velocidad (error de sincronía).</li>
        <li><strong>Chasis y soportes:</strong> rigidez mecánica evita vibración. Un soporte flojo = lectura inestable.</li>
      </ul>

      <hr class="mech-divider" />

      <p class="mech-text" style="margin:0;">
        <b>Problema típico:</b> “La visión está bien, pero la salida falla”. Muchas veces el origen real es mecánico:
        deslizamiento en rollers, holgura en ejes o vibración en pórtico.
      </p>
    </article>

    <article class="mech-card span-2">
      <h3 class="mech-card-title">Control de movimiento, potencia y sincronización (la cadena completa)</h3>

      <p class="mech-text" style="margin-top:0;">
        En GP Graders el desempeño depende de la relación entre <b>motores + reductores</b> (entrega de torque),
        <b>VFD</b> (control de velocidad), <b>encoder</b> (posición/tiempo) y <b>PLC</b> (coordinación).
        Si uno se desajusta, el sistema completo pierde precisión.
      </p>

      <div class="mech-grid" style="margin-top:10px;">
        <article class="mech-card" style="box-shadow:none;">
          <h4 class="mech-card-title" style="font-size:.98rem;">Motores + reductores</h4>
          <ul class="mech-list">
            <li><strong>Torque vs RPM:</strong> la reducción aumenta torque y estabiliza el arrastre.</li>
            <li><strong>Holguras:</strong> juego en acoples o cadenas se traduce en “micro-variaciones” de velocidad.</li>
            <li><strong>Señal de alerta:</strong> calentamiento anormal, ruido metálico, vibración periódica.</li>
          </ul>
        </article>

        <article class="mech-card" style="box-shadow:none;">
          <h4 class="mech-card-title" style="font-size:.98rem;">VFD (variadores)</h4>
          <ul class="mech-list">
            <li><strong>Evitar sobretemperatura:</strong> separación térmica y ventilación real en gabinete.</li>
            <li><strong>Rampas:</strong> rampas muy agresivas generan tirones; rampas muy suaves pueden perder sincronía al arranque.</li>
            <li><strong>Señal de alerta:</strong> paradas intermitentes, alarmas térmicas, velocidad “flotante”.</li>
          </ul>
        </article>
      </div>

      <hr class="mech-divider" />

      <div class="mech-grid" style="margin-top:10px;">
        <article class="mech-card" style="box-shadow:none;">
          <h4 class="mech-card-title" style="font-size:.98rem;">Encoder (posición real)</h4>
          <ul class="mech-list">
            <li><strong>Rol:</strong> convierte movimiento físico del eje en pulsos; define dónde está cada taza/momento.</li>
            <li><strong>Pérdida de pulsos:</strong> causa expulsiones corridas, “mezcla de clases” o caídas fuera de tiempo.</li>
            <li><strong>Señal de alerta:</strong> fallas que aparecen “a ratos”, especialmente a alta velocidad.</li>
          </ul>
        </article>

        <article class="mech-card" style="box-shadow:none;">
          <h4 class="mech-card-title" style="font-size:.98rem;">PLC + salidas (ejecución)</h4>
          <ul class="mech-list">
            <li><strong>Coordinación:</strong> lee sensores/encoder y ordena actuadores en el instante correcto.</li>
            <li><strong>Actuadores/solenoides:</strong> expulsión alineada al centro de la taza; requiere calibración física.</li>
            <li><strong>Señal de alerta:</strong> un carril falla más que otros → revisar actuador/holgura mecánica local.</li>
          </ul>
        </article>
      </div>

      <hr class="mech-divider" />

      <div class="callout">
        <h4>Puntos importantes (lo que más genera fallas reales)</h4>
        <ul class="mech-list">
          <li><strong>Gestión térmica:</strong> el calor afecta VFD y motores → deriva de velocidad y paradas intermitentes.</li>
          <li><strong>Cableado / vibración:</strong> microcortes o falsos contactos se interpretan como fallos de sincronía.</li>
          <li><strong>Referencia mecánica:</strong> la caída depende de distancias físicas bien medidas y repetibles.</li>
          <li><strong>Limpieza:</strong> jugos/residuos cambian fricción en rollers y guías → deslizamientos y rotación irregular.</li>
        </ul>
      </div>

      <div style="margin-top:12px;">
        <span class="badge"><span class="badgeDot"></span> Analogía</span>
        <p class="mech-text" style="margin-top:6px;">
          Si el sistema fuera un reloj: el motor entrega fuerza, el reductor estabiliza, el encoder cuenta los “ticks”
          y el PLC ejecuta. Si el encoder “salta ticks” o el motor entrega tirones, la hora (expulsión) queda corrida.
        </p>
      </div>
    </article>
  </div>
</section>

<!-- Figura general (formato hardware card) -->
<section class="section revealItem" id="sistema-mecanico">
  <div class="card">
    <div class="card-h">
      <h3>Sistema mecánico</h3>
      <div class="hint">Vista general y relación entre módulos</div>
    </div>
    <div class="card-b">
      <p class="mech-text" style="margin-top:0;">
        La línea integra alimentación, transporte, inspección y expulsión. La mecánica garantiza un flujo fluido,
        rotación estable y sincronización con el encoder para que cada fruto llegue al punto de salida correcto.
        En operación, la prioridad es mantener <b>estabilidad</b> (sin vibración), <b>tracción uniforme</b> (sin deslizamiento)
        y <b>referencias físicas consistentes</b> (misma posición, mismo tiempo).
      </p>

      <div class="callout" style="margin:12px 0 14px;">
        <h4>Checklist rápido antes de producción (3 minutos)</h4>
        <ul class="mech-list">
          <li><strong>Rodillos limpios</strong> (pérdida de agarre).</li>
          <li><strong>Guías alineadas</strong> (sin puntos que pellizquen).</li>
          <li><strong>Sin ruidos metálicos</strong> ni vibración anormal al subir velocidad.</li>
          <li><strong>Ventilación en gabinete</strong> funcionando (VFD sin alarmas térmicas).</li>
          <li><strong>Expulsión “seca”</strong> (solenoides responden parejo y sin retardo).</li>
        </ul>
      </div>

      <img
        src="Imagenes/Maquina general-12-24 at 8.52.51 AM.jpeg"
        alt="Vista general del sistema mecánico"
        class="img-figure w-m"
        data-zoomable="true"
      />
      <p class="caption">
        Vista general de la clasificadora: alimentación → transporte → zona de inspección → salidas.
      </p>

      <hr class="mech-divider" />

      <p class="mech-text" style="margin:0;">
        <b>Tip operativo:</b> cuando aumentes capacidad, no “subas todo” a la vez. Sube velocidad y observa:
        <b>rotación</b>, <b>centrado</b>, <b>saltos (jumps)</b> y <b>tasa de retorno</b>. Si alguno empeora, el límite real es mecánico.
      </p>
    </div>
  </div>
</section>

<!-- 2. Sistema general (módulos) -->
<section class="section revealItem" id="sistema-general">
  <div class="section-title">
    <div class="bar"></div>
    <h2>2. Sistema General</h2>
  </div>

  <p class="section-sub">
    Módulos mecánicos responsables del flujo, ordenamiento, inspección y distribución. Cada módulo tiene:
    <b>función</b> → <b>ajustes</b> → <b>fallas típicas</b> → <b>acciones recomendadas</b>.
  </p>

  <div class="mech-grid">
    <!-- 2.1 -->
    <article class="mech-card">
      <h3 class="mech-card-title">2.1 Elevador de producto</h3>

      <p class="mech-text">
        Transfiere frutos desde recepción/lavado hacia módulos superiores con flujo continuo. Debe evitar golpes y rebalses,
        y permitir drenaje para no arrastrar exceso de agua a la inspección.
      </p>

      <ul class="mech-list">
        <li><strong>Ajustes clave:</strong> velocidad, inclinación efectiva y punto de descarga (altura/ángulo).</li>
        <li><strong>Objetivo:</strong> entregar un flujo <b>constante</b> (sin “olas”).</li>
        <li><strong>Señales de problema:</strong> acumulación en base, producto que cae a golpes, goteo excesivo hacia módulos siguientes.</li>
        <li><strong>Acción recomendada:</strong> estabilizar velocidad, revisar tensado/arrastre y limpiar zonas donde se pega residuo.</li>
      </ul>

      <img src="Imagenes/WhatsApp Image 2025-12-24 at 8.50.41 AM.jpeg"
           alt="Elevador de producto"
           class="img-figure w-s"
           data-zoomable="true">
      <p class="caption">Elevador utilizado para alimentación y transferencia hacia etapas superiores.</p>
    </article>

    <!-- 2.2 -->
    <article class="mech-card">
      <h3 class="mech-card-title">2.2 Sierras para corte de pedicelo</h3>

      <p class="mech-text">
        Múltiples sierras rotativas paralelas separan pedicelo sin dañar fruto. La estabilidad depende del centrado del producto,
        velocidad constante y protección contra atascos.
      </p>

      <ul class="mech-list">
        <li><strong>Ajustes clave:</strong> separación entre sierras, velocidad de rotación, alineación del conjunto.</li>
        <li><strong>Objetivo:</strong> cortar pedicelo con <b>mínimo contacto</b> con la fruta.</li>
        <li><strong>Fallas típicas:</strong> corte incompleto (velocidad baja), daño del fruto (separación incorrecta), atasco por residuos.</li>
        <li><strong>Acción recomendada:</strong> limpieza periódica, verificar guardas, revisar vibración y desgaste de discos.</li>
      </ul>

      <img src="Imagenes/WhatsApp Image 2025-12-24 at 8.50.42 AM.jpeg"
           alt="Sistema de sierras"
           class="img-figure w-s"
           data-zoomable="true">
      <p class="caption">Sistema de sierras rotativas para corte de pedicelos.</p>
    </article>

    <!-- 2.3 -->
    <article class="mech-card">
      <h3 class="mech-card-title">2.3 Distribución post corte</h3>

      <p class="mech-text">
        Etapa de transición: redistribuye el producto para mantener carga uniforme y evitar cruces antes de singulación/rollers.
        Aquí se corrigen “desórdenes” de flujo.
      </p>

      <ul class="mech-list">
        <li><strong>Ajustes clave:</strong> nivelación, ángulos de canalización, velocidad relativa con módulo anterior.</li>
        <li><strong>Señales de problema:</strong> acumulaciones en una zona, cruces de carril, producto saltando.</li>
        <li><strong>Impacto:</strong> mala distribución aumenta <b>retorno</b> y reduce calidad de inspección.</li>
        <li><strong>Acción recomendada:</strong> nivelar, revisar superficies de contacto y puntos donde se pega residuo.</li>
      </ul>

      <img src="Imagenes/WhatsApp Image 2025-12-24 at 8.50.43 AM.jpeg"
           alt="Distribución post corte"
           class="img-figure w-s"
           data-zoomable="true">
      <p class="caption">Módulo de distribución y canalización del producto post corte.</p>
    </article>

    <!-- 2.4 -->
    <article class="mech-card">
      <h3 class="mech-card-title">2.4 Singulador de fruta</h3>

      <p class="mech-text">
        Separa y ordena la fruta para que ingrese de forma individual a los rollers. Es un “filtro” mecánico:
        si falla, la visión recibirá fruta superpuesta o mal posicionada.
      </p>

      <ul class="mech-list">
        <li><strong>Ajustes clave:</strong> velocidad sincronizada con línea, separación de canales y guías de entrada/salida.</li>
        <li><strong>Objetivo:</strong> <b>1 fruta = 1 posición</b> (sin dobles ni pegadas).</li>
        <li><strong>Señales de problema:</strong> dobles frecuentes, fruta cruzada, rebotes al ingreso a rollers.</li>
        <li><strong>Acción recomendada:</strong> ajustar guías, revisar vibración, y evitar exceso de carga desde elevador.</li>
      </ul>

      <img src="Imagenes/WhatsApp Image 2025-12-24 at 8.50.55 AM.jpeg"
           alt="Singulador de fruta"
           class="img-figure w-s"
           data-zoomable="true">
      <p class="caption">Singulador encargado de separar y ordenar cerezas antes de rollers.</p>
    </article>

    <!-- 2.5 -->
    <article class="mech-card span-2">
      <h3 class="mech-card-title">2.5 Zona de inspección: visión + transporte</h3>

      <p class="mech-text">
        El pórtico de visión debe ser rígido y estable. La inspección depende de que el fruto se transporte con velocidad constante,
        sin vibración y con rotación repetible. Aquí cualquier detalle mecánico “se convierte” en error de clasificación.
      </p>

      <ul class="mech-list">
        <li><strong>Requisito mecánico:</strong> la fruta debe viajar centrada; si se pega a una guía, cambia el ángulo de captura.</li>
        <li><strong>Vibración:</strong> provoca desenfoque y variación de iluminación efectiva.</li>
        <li><strong>Higiene:</strong> agua/jugos pueden crear reflejos o cambiar fricción y rotación.</li>
      </ul>

      <img src="Imagenes/WhatsApp Image 2025-12-24 at 8.52.51 AM.jpeg"
           alt="Sistema de visión"
           class="img-figure w-m"
           data-zoomable="true">
      <p class="caption">Sistema de visión en pórtico rígido para inspección óptica del fruto en movimiento.</p>

      <hr class="mech-divider" />

      <h4 style="margin:0 0 6px; color:var(--text); font-size: .98rem;">2.5.1 Rollers (rodillos hacia salidas)</h4>

      <p class="mech-text">
        Los rollers transportan y rotan el fruto. La velocidad debe estar sincronizada con el encoder para asegurar que la decisión
        del sistema se ejecute exactamente en el punto de expulsión.
      </p>

      <ul class="mech-list">
        <li><strong>Ajustes clave:</strong> tracción uniforme, alineación de ejes, limpieza y desgaste parejo.</li>
        <li><strong>Problema típico:</strong> “deslizamiento” → la fruta rota menos o avanza distinto → la expulsión queda corrida.</li>
        <li><strong>Señales:</strong> mayor retorno, clases mezcladas, errores que aumentan al subir velocidad.</li>
        <li><strong>Acción recomendada:</strong> limpieza, revisar rodillos “vidriados”, tensión y acoples; confirmar que la fruta no esté húmeda en exceso.</li>
      </ul>

      <div class="callout" style="margin-top:12px;">
        <h4>Regla práctica</h4>
        <ul class="mech-list">
          <li>Si el error aparece solo <strong>a alta velocidad</strong>, sospecha de <strong>deslizamiento / vibración / encoder</strong>.</li>
          <li>Si el error ocurre siempre en el <strong>mismo carril</strong>, sospecha de <strong>rodillo/guía/actuador local</strong>.</li>
        </ul>
      </div>
    </article>

    <!-- 2.6 -->
    <article class="mech-card">
      <h3 class="mech-card-title">2.6 Salidas y distribución</h3>

      <p class="mech-text">
        Las salidas reciben el fruto clasificado. La expulsión debe ocurrir cuando la taza está centrada respecto al punto de caída.
        Errores aquí generan mezclas de clase o pérdidas de trazabilidad.
      </p>

      <ul class="mech-list">
        <li><strong>Ajustes clave:</strong> posición física de salida, tiempo/retardo del actuador, verificación de alineación.</li>
        <li><strong>Fallas típicas:</strong> retardo de solenoide, actuador débil, guía mal centrada o salida sucia.</li>
        <li><strong>Señales:</strong> clase correcta pero cae al contenedor equivocado; caídas “a medias”.</li>
        <li><strong>Acción recomendada:</strong> limpiar, revisar respuesta del actuador, y validar la referencia mecánica del punto de expulsión.</li>
      </ul>

      <img src="Imagenes/WhatsApp Image 2026-01-05 at 4.22.28 PM.jpeg"
           alt="Sistema de salidas"
           class="img-figure w-s"
           data-zoomable="true">
      <p class="caption">Sistema de salidas: distribución del fruto hacia contenedores según clase.</p>
    </article>

    <!-- 2.7 -->
    <article class="mech-card">
      <h3 class="mech-card-title">2.7 Retorno de fruta no clasificada</h3>

      <p class="mech-text">
        El retorno recircula fruta no leída/no clasificada. Es un indicador clave: si aumenta, normalmente hay un problema mecánico
        (rotación/posicionamiento) o de condiciones (humedad/limpieza/vibración).
      </p>

      <ul class="mech-list">
        <li><strong>Qué significa:</strong> la fruta no cumplió condiciones mínimas para lectura confiable o sincronía.</li>
        <li><strong>Causas típicas:</strong> dobles, mala rotación, exceso de agua, vibración en pórtico, deslizamiento en rollers.</li>
        <li><strong>Acción recomendada:</strong> revisar módulos previos (singulador y distribución), limpiar rollers y verificar encoder.</li>
        <li><strong>Regla:</strong> retorno alto sostenido = la línea está “fuera de condición”.</li>
      </ul>

      <img src="Imagenes/retorno-fruta.jpeg"
           alt="Sistema de retorno"
           class="img-figure w-s"
           data-zoomable="true">
      <p class="caption">Retorno: recirculación de fruta para una nueva inspección.</p>
    </article>

    <!-- Extra: mantenimiento y seguridad (muy útil) -->
    <article class="mech-card span-2">
      <h3 class="mech-card-title">2.8 Mantenimiento y seguridad (recomendado)</h3>

      <p class="mech-text" style="margin-top:0;">
        La estabilidad mecánica depende más del mantenimiento que de “ajustes finos”. Una rutina simple evita la mayoría de
        fallas intermitentes.
      </p>

      <div class="mech-grid" style="margin-top:10px;">
        <article class="mech-card" style="box-shadow:none;">
          <h4 class="mech-card-title" style="font-size:.98rem;">Rutina diaria (inicio / fin)</h4>
          <ul class="mech-list">
            <li><strong>Limpieza:</strong> rollers, guías, salidas y zonas con jugo/residuo.</li>
            <li><strong>Inspección visual:</strong> tornillos flojos, vibración, guardas, cables sueltos.</li>
            <li><strong>Chequeo térmico:</strong> gabinete, ventiladores, VFD sin alarmas.</li>
          </ul>
        </article>

        <article class="mech-card" style="box-shadow:none;">
          <h4 class="mech-card-title" style="font-size:.98rem;">Rutina semanal (preventivo)</h4>
          <ul class="mech-list">
            <li><strong>Revisar tensiones:</strong> cadenas/correas y acoples.</li>
            <li><strong>Desgaste:</strong> rodillos vidriados, guías marcadas, actuadores con retorno lento.</li>
            <li><strong>Verificar referencia:</strong> alineación punto de expulsión vs centro de taza.</li>
          </ul>
        </article>
      </div>

      <div class="callout" style="margin-top:12px;">
        <h4>Seguridad (mínimos)</h4>
        <ul class="mech-list">
          <li><strong>Bloqueo/etiquetado (LOTO):</strong> antes de intervenir rodillos, sierras o salidas.</li>
          <li><strong>Guardas:</strong> nunca operar con protecciones retiradas.</li>
          <li><strong>Prueba controlada:</strong> después de ajuste, arrancar en baja velocidad y observar vibración/ruidos.</li>
        </ul>
      </div>
    </article>

  </div>
</section>

</main>


<footer>
  Mecánica General · GP Graders · Documentación técnica interna
</footer>

<script>
  // =========================
  // REVEAL (hardware feel)
  // =========================
  (function(){
    const targets = document.querySelectorAll(".revealItem, .mech-card, .card");
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          e.target.classList.add("reveal");
          io.unobserve(e.target);
        }
      });
    }, { threshold: 0.12 });

    targets.forEach((el, i)=>{
      // delay suave para tarjetas
      if(el.classList.contains("mech-card")) el.style.transitionDelay = `${Math.min(i*35, 350)}ms`;
      io.observe(el);
    });
  })();

  // =========================
  // BUSCADOR + AUTOCOMPLETE
  // =========================
  const searchInput = document.getElementById("searchInput");
  const suggestList = document.getElementById("suggestList");
  const searchBtn = document.getElementById("searchBtn");
  const clearBtn = document.getElementById("clearSearchBtn");
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");
  const meta = document.getElementById("searchMeta");

  let hits = [];
  let activeIndex = -1;

  let indexItems = [];
  let suggestActive = -1;
  const MAX_SUGGEST = 8;

  const SKIP_TAGS = new Set(["SCRIPT","STYLE","INPUT","TEXTAREA","BUTTON","IFRAME","MARK"]);

  function escapeRegExp(str){
    return str.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
  }

  function clearMarks(){
    document.querySelectorAll("mark.gp-hit").forEach(m => {
      const t = document.createTextNode(m.textContent);
      m.replaceWith(t);
    });
    hits = [];
    activeIndex = -1;
  }

  function setActive(idx){
    if(!hits.length) return;
    hits.forEach(h => h.classList.remove("active"));
    activeIndex = (idx + hits.length) % hits.length;
    hits[activeIndex].classList.add("active");
    hits[activeIndex].scrollIntoView({ behavior:"smooth", block:"center" });
    meta.textContent = `Coincidencias: ${hits.length} · Mostrando ${activeIndex + 1}/${hits.length}`;
  }

  function highlight(term){
    clearMarks();
    if(!term) {
      meta.textContent = "Sin búsqueda activa.";
      return;
    }

    const root = document.querySelector("main");
    const rx = new RegExp(escapeRegExp(term), "gi");

    const walker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, {
      acceptNode(node){
        if(!node.nodeValue || !node.nodeValue.trim()) return NodeFilter.FILTER_REJECT;
        const p = node.parentElement;
        if(!p) return NodeFilter.FILTER_REJECT;
        if(SKIP_TAGS.has(p.tagName)) return NodeFilter.FILTER_REJECT;
        return NodeFilter.FILTER_ACCEPT;
      }
    });

    const nodes = [];
    while(walker.nextNode()) nodes.push(walker.currentNode);

    nodes.forEach(node => {
      const txt = node.nodeValue;
      if(!rx.test(txt)) return;

      rx.lastIndex = 0;
      const frag = document.createDocumentFragment();
      let last = 0;
      let m;

      while((m = rx.exec(txt)) !== null){
        const start = m.index;
        const end = start + m[0].length;

        if(start > last) frag.appendChild(document.createTextNode(txt.slice(last, start)));

        const mark = document.createElement("mark");
        mark.className = "gp-hit";
        mark.textContent = txt.slice(start, end);
        frag.appendChild(mark);

        last = end;
      }

      if(last < txt.length) frag.appendChild(document.createTextNode(txt.slice(last)));
      node.parentNode.replaceChild(frag, node);
    });

    hits = Array.from(document.querySelectorAll("mark.gp-hit"));
    if(hits.length){
      setActive(0);
    }else{
      meta.textContent = "No se encontraron coincidencias.";
    }
  }

  function buildIndex(){
    const root = document.querySelector("main");
    indexItems = [];

    root.querySelectorAll("h1,h2,h3,h4").forEach((el, i) => {
      const t = (el.innerText || "").trim();
      if(t.length >= 3) indexItems.push({ id: `h-${i}`, text: t, el });
    });

    root.querySelectorAll("li").forEach((el, i) => {
      const t = (el.innerText || "").trim();
      if(t.length >= 12) indexItems.push({ id: `li-${i}`, text: t.slice(0, 220), el });
    });

    root.querySelectorAll("p").forEach((el, i) => {
      const t = (el.innerText || "").trim();
      if(t.length >= 22) indexItems.push({ id: `p-${i}`, text: t.slice(0, 220), el });
    });
  }

  function norm(s){
    return (s || "")
      .toLowerCase()
      .normalize("NFD").replace(/[\u0300-\u036f]/g,"");
  }

  function scoreMatch(query, text){
    const q = norm(query);
    const t = norm(text);
    if(!q) return -1;
    const idx = t.indexOf(q);
    if(idx === -1) return -1;

    let score = 0;
    if(idx === 0) score += 6;
    score += Math.max(0, 5 - Math.min(idx, 5));
    score += Math.min(q.length / 4, 4);
    return score;
  }

  function hiText(text, query){
    const q = query.trim();
    if(!q) return text;
    const rx = new RegExp(escapeRegExp(q), "ig");
    return text.replace(rx, (m)=>`<span class="suggest-hi">${m}</span>`);
  }

  function hideSuggest(){
    suggestList.style.display = "none";
    suggestList.innerHTML = "";
    suggestActive = -1;
  }

  function showSuggest(items, query){
    if(!items.length){
      hideSuggest();
      return;
    }
    suggestList.innerHTML = items.map((it, idx) => {
      const line = it.text.length > 120 ? it.text.slice(0, 120) + "…" : it.text;
      return `
        <div class="suggest-item" data-idx="${idx}">
          <div class="suggest-title">${hiText(line, query)}</div>
        </div>
      `;
    }).join("");
    suggestList.style.display = "block";
  }

  function getSuggestions(query){
    const q = query.trim();
    if(q.length < 1) return [];
    return indexItems
      .map(it => ({ it, s: scoreMatch(q, it.text) }))
      .filter(x => x.s >= 0)
      .sort((a,b) => b.s - a.s)
      .slice(0, MAX_SUGGEST)
      .map(x => x.it);
  }

  function jumpToElement(el, query){
    if(!el) return;
    el.scrollIntoView({ behavior:"smooth", block:"center" });
    highlight(query);
    if(hits.length) setActive(0);
    hideSuggest();
  }

  buildIndex();

  searchInput?.addEventListener("input", () => {
    const q = searchInput.value;
    showSuggest(getSuggestions(q), q);
  });

  suggestList?.addEventListener("click", (e) => {
    const item = e.target.closest(".suggest-item");
    if(!item) return;
    const q = searchInput.value.trim();
    const suggestions = getSuggestions(q);
    const idx = Number(item.dataset.idx);
    const it = suggestions[idx];
    if(it) jumpToElement(it.el, q);
  });

  searchInput?.addEventListener("keydown", (e)=>{
    const q = searchInput.value.trim();
    const suggestions = getSuggestions(q);
    if(!suggestions.length) return;

    const items = Array.from(suggestList.querySelectorAll(".suggest-item"));

    if(e.key === "ArrowDown"){
      e.preventDefault();
      suggestActive = (suggestActive + 1) % items.length;
      items.forEach(x => x.classList.remove("active"));
      items[suggestActive].classList.add("active");
      items[suggestActive].scrollIntoView({ block:"nearest" });
    }
    if(e.key === "ArrowUp"){
      e.preventDefault();
      suggestActive = (suggestActive - 1 + items.length) % items.length;
      items.forEach(x => x.classList.remove("active"));
      items[suggestActive].classList.add("active");
      items[suggestActive].scrollIntoView({ block:"nearest" });
    }
    if(e.key === "Enter"){
      if(suggestActive >= 0 && suggestions[suggestActive]){
        e.preventDefault();
        jumpToElement(suggestions[suggestActive].el, q);
      }else{
        highlight(q);
        hideSuggest();
      }
    }
    if(e.key === "Escape"){ hideSuggest(); }
  });

  document.addEventListener("click", (e)=>{
    const wrap = e.target.closest(".search-wrap");
    if(!wrap) hideSuggest();
  });

  searchBtn?.addEventListener("click", () => {
    const q = searchInput.value.trim();
    highlight(q);
    hideSuggest();
  });

  nextBtn?.addEventListener("click", ()=> setActive(activeIndex + 1));
  prevBtn?.addEventListener("click", ()=> setActive(activeIndex - 1));

  clearBtn?.addEventListener("click", ()=>{
    searchInput.value = "";
    clearMarks();
    meta.textContent = "Sin búsqueda activa.";
    hideSuggest();
  });

  // =========================
  // LIGHTBOX para imágenes
  // =========================
  (function(){
    const lb = document.getElementById("imgLightbox");
    const lbImg = document.getElementById("imgLightboxImg");

    function open(src, alt){
      lbImg.src = src;
      lbImg.alt = alt || "";
      lb.classList.add("open");
      lb.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
    }
    function close(){
      lb.classList.remove("open");
      lb.setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";
      lbImg.src = "";
    }

    document.querySelectorAll("img[data-zoomable='true']").forEach(img=>{
      img.addEventListener("click", ()=> open(img.src, img.alt));
    });

    lb.addEventListener("click", close);

    document.addEventListener("keydown", (e)=>{
      if(e.key === "Escape" && lb.classList.contains("open")) close();
    });
  })();
</script>

</body>
</html>
