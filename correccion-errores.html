<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Corrección de errores | GP Graders</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    :root{
      --bg0:#070e18;
      --bg2:#0f1e33;
      --panel: rgba(255,255,255,.04);
      --stroke: rgba(255,255,255,.10);
      --text:#eaf1ff;
      --muted:#b9c6e3;
      --brand:#4da3ff;
      --brand2:#38d4ff;

      --good:#2ee59d;
      --warn:#ffd36a;
      --bad:#ff5d6c;

      --shadow: 0 16px 50px rgba(0,0,0,.45);
      --r20:20px;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family:"Segoe UI", Tahoma, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 500px at 15% 10%, rgba(77,163,255,.18), transparent 60%),
        radial-gradient(900px 600px at 80% 90%, rgba(77,163,255,.10), transparent 55%),
        linear-gradient(135deg, var(--bg0), var(--bg2));
      overflow-x:hidden;
    }

    /* ===== subtle animated glow background ===== */
    body::before{
      content:"";
      position:fixed;
      inset:-40px;
      pointer-events:none;
      background:
        radial-gradient(520px 320px at 18% 18%, rgba(77,163,255,.14), transparent 62%),
        radial-gradient(520px 320px at 85% 82%, rgba(77,163,255,.10), transparent 64%);
      opacity:.95;
      animation: bgFloat 10s ease-in-out infinite alternate;
      z-index:0;
    }
    @keyframes bgFloat{
      from{ transform: translate3d(-10px,-6px,0) scale(1); }
      to  { transform: translate3d(10px,8px,0) scale(1.02); }
    }

    header{
      position:sticky;
      top:0;
      background:rgba(8,14,24,.9);
      border-bottom:1px solid rgba(255,255,255,.08);
      z-index:10;
      transform: translateY(-6px);
      opacity:0;
      animation: fadeDown .45s ease forwards;
      backdrop-filter: blur(10px);
    }
    @keyframes fadeDown{
      to{ transform: translateY(0); opacity:1; }
    }

    header .wrap{
      max-width:1100px;
      margin:auto;
      padding:14px 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }

    header h1{
      margin:0;
      font-size:16px;
    }

    header span{
      font-size:12px;
      color:var(--muted);
    }

    .btn{
      padding:9px 14px;
      border-radius:12px;
      text-decoration:none;
      font-weight:700;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.04);
      color:var(--text);
      white-space:nowrap;
      transition: transform .15s ease, border-color .15s ease, box-shadow .15s ease, background .15s ease;
      position: relative;
      overflow:hidden;
      will-change: transform;
    }
    .btn::after{
      content:"";
      position:absolute;
      inset:0;
      background: radial-gradient(400px 120px at 10% 10%, rgba(77,163,255,.18), transparent 65%);
      opacity:0;
      transition: opacity .2s ease;
      pointer-events:none;
    }
    .btn:hover{
      border-color: rgba(77,163,255,.55);
      transform: translateY(-1px);
      box-shadow: 0 12px 30px rgba(0,0,0,.28);
      background: rgba(0,0,0,.10);
    }
    .btn:hover::after{ opacity:1; }
    .btn:active{ transform: translateY(0) scale(.99); }

    .btn.primary{
      border-color: rgba(77,163,255,.55);
      background: linear-gradient(180deg, rgba(77,163,255,.18), rgba(56,212,255,.12));
    }
    .btn.primary:hover{
      border-color: rgba(77,163,255,.85);
    }

    main{
      max-width:1100px;
      margin:auto;
      padding:26px 18px 50px;
      position: relative;
      z-index:1;
    }

    .hero{
      background:rgba(255,255,255,.03);
      border:1px solid var(--stroke);
      border-radius:var(--r20);
      box-shadow:var(--shadow);
      padding:18px 16px;
      transform: translateY(10px);
      opacity:0;
      transition: transform .55s ease, opacity .55s ease;
    }
    .hero.reveal{ transform: translateY(0); opacity:1; }

    .hero h2{
      margin:0;
      font-size:18px;
      display:flex;
      align-items:center;
      gap:10px;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:12px;
      color:var(--muted);
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.03);
      padding:6px 10px;
      border-radius:999px;
    }

    .dot{
      width:9px;
      height:9px;
      border-radius:99px;
      background:var(--brand2);
      box-shadow:0 0 0 6px rgba(56,212,255,.12);
      animation: pulseDot 1.9s ease-in-out infinite;
    }
    @keyframes pulseDot{
      0%,100%{ transform: scale(1); box-shadow:0 0 0 6px rgba(56,212,255,.12); }
      50%{ transform: scale(1.08); box-shadow:0 0 0 10px rgba(56,212,255,.10); }
    }

    .section{ margin-top:26px; }

    .section-title{
      display:flex;
      align-items:center;
      gap:12px;
      margin-bottom:8px;
    }

    .bar{
      width:10px;
      height:22px;
      border-radius:8px;
      background:linear-gradient(180deg,var(--brand),var(--brand2));
      box-shadow: 0 10px 26px rgba(77,163,255,.10);
    }

    .section-title h3{
      margin:0;
      font-size:18px;
    }

    .section-sub{
      font-size:13px;
      color:var(--muted);
      margin-bottom:18px;
      max-width:900px;
      line-height:1.55;
    }

    /* ===== BUSCADOR ===== */
    .search-wrap{
      margin-top: 14px;
      background: var(--panel);
      border: 1px solid var(--stroke);
      border-radius: 16px;
      box-shadow: var(--shadow);
      overflow: visible;
      margin-bottom: 18px; /* separa el buscador de la primera ficha */
      transform: translateY(10px);
      opacity:0;
      transition: transform .55s ease, opacity .55s ease;
    }
    .search-wrap.reveal{ transform: translateY(0); opacity:1; }

    .search-head{
      padding: 14px 16px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .search-head h3{
      margin:0;
      font-size: 14px;
    }
    .search-head .hint{
      margin-top: 4px;
      font-size: 12px;
      color: var(--muted);
    }
    .search-body{ padding: 14px 16px 16px; }
    .search-row{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap: wrap;
    }
    .search-input{
      flex: 1;
      min-width: 220px;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.22);
      color: var(--text);
      outline: none;
      transition: border-color .15s ease, box-shadow .15s ease, transform .15s ease;
    }
    .search-input:focus{
      border-color: rgba(77,163,255,.55);
      box-shadow: 0 0 0 6px rgba(77,163,255,.12);
      transform: translateY(-1px);
    }
    .search-meta{
      margin-top: 10px;
      font-size: 12px;
      color: rgba(230,237,245,.60);
    }

    /* resaltado */
    mark.gp-hit{
      background: rgba(77,163,255,.25);
      border: 1px solid rgba(77,163,255,.35);
      color: var(--text);
      padding: 0 2px;
      border-radius: 6px;
      transition: box-shadow .2s ease, background .2s ease, border-color .2s ease;
    }
    mark.gp-hit.active{
      background: rgba(77,163,255,.45);
      border-color: rgba(77,163,255,.75);
      box-shadow: 0 0 0 6px rgba(77,163,255,.14);
      animation: popHit .28s ease;
    }
    @keyframes popHit{
      from{ transform: scale(.98); }
      to{ transform: scale(1); }
    }

    /* ===== AUTOCOMPLETE LIST ===== */
    .search-suggest{
      position: relative;
      flex: 1;
      min-width: 220px;
    }
    .search-suggest .search-input{ width: 100%; }

    .suggest-list{
      position: absolute;
      top: calc(100% + 8px);
      left: 0;
      right: 0;
      background: rgba(10,20,34,.98);
      border: 1px solid rgba(255,255,255,.14);
      border-radius: 14px;
      box-shadow: 0 18px 60px rgba(0,0,0,.55);
      overflow: hidden;
      z-index: 999;
      max-height: 280px;
      overflow-y: auto;
      display: none;
      transform-origin: top;
      animation: drop .16s ease;
    }
    @keyframes drop{
      from{ transform: translateY(-6px) scale(.98); opacity:.4; }
      to{ transform: translateY(0) scale(1); opacity:1; }
    }

    .suggest-item{
      padding: 10px 12px;
      cursor: pointer;
      border-top: 1px solid rgba(255,255,255,.08);
      transition: background .12s ease, transform .12s ease;
    }
    .suggest-item:first-child{ border-top: none; }
    .suggest-item:hover,
    .suggest-item.active{
      background: rgba(77,163,255,.12);
      transform: translateX(2px);
    }
    .suggest-title{
      font-size: 13px;
      color: rgba(230,237,245,.92);
      line-height: 1.35;
    }

    .suggest-hi{
      background: rgba(77,163,255,.22);
      border: 1px solid rgba(77,163,255,.35);
      padding: 0 2px;
      border-radius: 6px;
    }

    /* =========================
       GUÍA DE ESTADOS
       ========================= */
    .status-guide{
      background: var(--panel);
      border: 1px solid var(--stroke);
      border-radius: var(--r20);
      box-shadow: var(--shadow);
      padding: 16px;
      margin-top: 14px;

      transform: translateY(10px);
      opacity:0;
      transition: transform .55s ease, opacity .55s ease;
    }
    .status-guide.reveal{ transform: translateY(0); opacity:1; }

    .status-list{
      display: grid;
      gap: 12px;
      margin-top: 12px;
    }

    .status-row{
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      transition: transform .15s ease, border-color .15s ease, box-shadow .15s ease, background .15s ease;
      position: relative;
      overflow:hidden;
    }
    .status-row::before{
      content:"";
      position:absolute;
      inset:-1px;
      border-radius: 16px;
      background: radial-gradient(520px 200px at 15% 0%, rgba(77,163,255,.12), transparent 60%);
      opacity:0;
      transition: opacity .18s ease;
      pointer-events:none;
    }
    .status-row:hover{
      transform: translateY(-2px);
      border-color: rgba(77,163,255,.35);
      box-shadow: 0 20px 60px rgba(0,0,0,.35);
      background: rgba(255,255,255,.04);
    }
    .status-row:hover::before{ opacity:1; }

    .status-icon{
      width: 44px;
      height: 44px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      flex: 0 0 auto;
      transition: transform .15s ease, border-color .15s ease;
    }
    .status-row:hover .status-icon{
      transform: rotate(-1deg) scale(1.03);
      border-color: rgba(77,163,255,.35);
    }

    .status-icon img{
      width: 80%;
      height: 80%;
      object-fit: contain;
      display:block;
      transform: translateZ(0);
    }

    .status-body{ flex: 1; }

    .status-top{
      display:flex;
      align-items:center;
      gap: 10px;
      margin-bottom: 6px;
    }

    .status-badge{
      width: 10px;
      height: 10px;
      border-radius: 99px;
      flex: 0 0 auto;
    }
    .status-badge.good{ background: var(--good); box-shadow: 0 0 0 6px rgba(46,229,157,.12); }
    .status-badge.warn{ background: var(--warn); box-shadow: 0 0 0 6px rgba(255,211,106,.12); }
    .status-badge.bad{  background: var(--bad);  box-shadow: 0 0 0 6px rgba(255,93,108,.12); }

    .status-title{
      margin: 0;
      font-size: 13px;
      letter-spacing: .2px;
    }

    .status-text{
      margin: 0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.55;
    }
    .status-text b{ color: var(--text); }

    /* ===== TROUBLE CARD ===== */
    details.trouble{
      background:var(--panel);
      border:1px solid var(--stroke);
      border-radius:var(--r20);
      box-shadow:var(--shadow);
      margin-bottom:16px;
      overflow:hidden;

      transform: translateY(10px);
      opacity:0;
      transition: transform .55s ease, opacity .55s ease, border-color .15s ease, box-shadow .15s ease;
    }
    details.trouble.reveal{ transform: translateY(0); opacity:1; }
    details.trouble:hover{
      border-color: rgba(77,163,255,.25);
      box-shadow: 0 22px 70px rgba(0,0,0,.45);
    }

    details.trouble summary{
      cursor:pointer;
      list-style:none;
      padding:14px 16px;
      border-bottom:1px solid rgba(255,255,255,.08);
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      user-select:none;
      transition: background .15s ease;
      position: relative;
    }
    details.trouble summary:hover{
      background: rgba(255,255,255,.02);
    }

    details.trouble summary::-webkit-details-marker{ display:none; }

    /* caret indicator */
    details.trouble summary::after{
      content:"▾";
      color: rgba(230,237,245,.65);
      font-size: 14px;
      margin-left:auto;
      transform: rotate(-90deg);
      transition: transform .18s ease, color .18s ease;
      padding-left: 10px;
    }
    details.trouble[open] summary::after{
      transform: rotate(0deg);
      color: rgba(230,237,245,.85);
    }

    /* open animation (soft) */
    details.trouble[open]{
      animation: openPop .22s ease;
    }
    @keyframes openPop{
      from{ transform: translateY(6px) scale(.995); }
      to  { transform: translateY(0) scale(1); }
    }

    .sum-left{
      display:flex;
      gap:12px;
      align-items:flex-start;
    }

    .badge{
      width:34px;
      height:34px;
      border-radius:14px;
      background:rgba(77,163,255,.14);
      border:1px solid rgba(77,163,255,.28);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:900;
      flex:0 0 auto;
      transition: transform .15s ease, border-color .15s ease;
    }
    details.trouble:hover .badge{
      transform: translateY(-1px);
      border-color: rgba(77,163,255,.45);
    }

    .sum-title{
      margin:0;
      font-size:14px;
      line-height:1.3;
    }

    .sum-mini{
      margin-top:4px;
      font-size:12px;
      color:var(--muted);
      line-height:1.35;
    }

    .tags{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      justify-content:flex-end;
      flex:0 0 auto;
    }

    .tag{
      font-size:11.5px;
      color:rgba(234,241,255,.85);
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.03);
      padding:6px 10px;
      border-radius:999px;
      white-space:nowrap;
      transition: transform .15s ease, border-color .15s ease;
    }
    details.trouble:hover .tag{ transform: translateY(-1px); }

    .tag.good{ border-color:rgba(46,229,157,.22); background:rgba(46,229,157,.08); }
    .tag.warn{ border-color:rgba(255,211,106,.22); background:rgba(255,211,106,.08); }
    .tag.bad{ border-color:rgba(255,93,108,.22); background:rgba(255,93,108,.08); }

    .content{
      padding:14px 16px 16px;
      display:grid;
      grid-template-columns: 1fr;
      gap:14px;
    }

    .block{
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.03);
      border-radius:16px;
      padding:12px;
      transition: transform .15s ease, border-color .15s ease, box-shadow .15s ease;
      position: relative;
      overflow:hidden;
    }
    .block::before{
      content:"";
      position:absolute;
      inset:-1px;
      border-radius:16px;
      background: radial-gradient(520px 180px at 10% 0%, rgba(77,163,255,.10), transparent 60%);
      opacity:0;
      transition: opacity .18s ease;
      pointer-events:none;
    }
    .block:hover{
      transform: translateY(-2px);
      border-color: rgba(77,163,255,.25);
      box-shadow: 0 18px 55px rgba(0,0,0,.35);
    }
    .block:hover::before{ opacity:1; }

    .block h4{
      margin:0 0 8px;
      font-size:13px;
      letter-spacing:.2px;
    }

    .block p{
      margin:0;
      color:var(--muted);
      font-size:13px;
      line-height:1.55;
    }

    .ph{
      height:240px;
      border-radius:16px;
      border:2px dashed rgba(255,255,255,.25);
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      font-size:12px;
      color:rgba(255,255,255,.6);
      margin-top:10px;
      transition: border-color .15s ease, transform .15s ease, background .15s ease;
      background: rgba(0,0,0,.12);
    }
    .block:hover .ph{
      border-color: rgba(77,163,255,.30);
      transform: translateY(-1px);
      background: rgba(77,163,255,.05);
    }

    .steps{
      margin:0;
      padding-left:18px;
      color:var(--muted);
      font-size:13px;
      line-height:1.6;
    }
    .steps li{ margin:6px 0; }

    footer{
      text-align:center;
      font-size:12px;
      color:rgba(255,255,255,.4);
      padding:20px;
      position: relative;
      z-index: 1;
    }

    /* ===== Reduced motion ===== */
    @media (prefers-reduced-motion: reduce){
      *{ animation: none !important; transition: none !important; }
      html{ scroll-behavior:auto; }
      body::before{ display:none; }
    }
  </style>
</head>

<body>

    <script>
    if (sessionStorage.getItem("gp_session") !== "1") {
      location.href = "login.html";
    }
  </script>

<header>
  <div class="wrap">
    <div>
      <h1>Corrección de errores – GP Graders</h1>
      <span>Troubleshooting · Problema → Evidencia → Solución paso a paso</span>
    </div>
    <a href="menu.html" class="btn">⬅ Volver al menú</a>
  </div>
</header>

<main>

  <!-- ===== HERO ===== -->
  <section class="hero">
    <h2>
      Guía de corrección de errores
      <span class="pill"><span class="dot"></span> Formato: ficha por problema</span>
    </h2>
    <p style="margin:10px 0 0; color:var(--muted); font-size:13px; line-height:1.55; max-width:930px;">
      Cada ficha contiene: <b>nombre del problema</b>, <b>descripción</b>, <b>imagen de referencia</b> y
      <b>solución paso a paso</b>. Solo debes duplicar una ficha y completar los campos.
    </p>
  </section>

  <section class="section" id="guia-estados">
    <div class="section-title">
      <div class="bar"></div>
      <h3>Guía de estados</h3>
    </div>

    <p class="section-sub">
      Los estados visuales permiten identificar rápidamente la condición del sistema y priorizar acciones.
    </p>

    <div class="status-guide">
      <div class="status-list">

        <!-- OK -->
        <div class="status-row">
          <div class="status-icon">
            <img src="Imagenes/72-723243_transparent-background-clear-green-check-mark-hd-png-removebg-preview.png" alt="Estado correcto">
          </div>

          <div class="status-body">
            <div class="status-top">
              <span class="status-badge good"></span>
              <h4 class="status-title">Estado correcto (OK)</h4>
            </div>

            <p class="status-text">
              <b>Significado:</b> el sistema está funcionando correctamente. Las <b>RTUnits</b> están estables y no hay alarmas relevantes.
            </p>
          </div>
        </div>

        <!-- WARNING -->
        <div class="status-row">
          <div class="status-icon">
            <img src="Imagenes/istockphoto-664882396-170667a-removebg-preview.png" alt="Estado de advertencia">
          </div>

          <div class="status-body">
            <div class="status-top">
              <span class="status-badge warn"></span>
              <h4 class="status-title">Estado de advertencia (Warning)</h4>
            </div>

            <p class="status-text">
              <b>Significado:</b> hay algo fuera de lo esperado, pero <b>no es crítico</b>. Se recomienda revisar para prevenir fallas mayores.
            </p>
          </div>
        </div>

        <!-- DANGER -->
        <div class="status-row">
          <div class="status-icon">
            <img src="Imagenes/hazard-warning-sign-png.webp" alt="Estado de peligro">
          </div>

          <div class="status-body">
            <div class="status-top">
              <span class="status-badge bad"></span>
              <h4 class="status-title">Estado de peligro (Danger)</h4>
            </div>

            <p class="status-text">
              <b>Significado:</b> existe un problema <b>grave</b> que afecta el funcionamiento. Se debe <b>corregir de inmediato</b>.
            </p>
          </div>
        </div>

      </div>
    </div>
  </section>

  <section class="search-wrap" id="buscador">
    <div class="search-head">
      <div>
        <h3>Búsqueda rápida en el manual</h3>
        <div class="hint">Busca por palabra o frase y salta entre coincidencias</div>
      </div>
      <button class="btn" id="clearSearchBtn" type="button">Limpiar</button>
    </div>

    <div class="search-body">
      <div class="search-row">

        <div class="search-suggest">
          <input class="search-input" id="searchInput" type="text" autocomplete="off"
                placeholder="Ej: cámara, encoder, severidad alta, hardware...">
          <div class="suggest-list" id="suggestList"></div>
        </div>

        <button class="btn primary" id="searchBtn" type="button">Buscar</button>
        <button class="btn" id="prevBtn" type="button">◀</button>
        <button class="btn" id="nextBtn" type="button">▶</button>
      </div>
      <div class="search-meta" id="searchMeta">Sin búsqueda activa.</div>
    </div>
  </section>

  <!-- ========================= -->
  <!-- FICHA 1 (ACTUALIZADA) -->
  <!-- ========================= -->
  <details class="trouble" open>
    <summary>
      <div class="sum-left">
        <div class="badge">1</div>
        <div>
          <p class="sum-title"><b>Reinicio de cámaras desde PuTTY (SSH) – Vision Unit VU 7–8</b></p>
          <p class="sum-mini">Cuando un carril no vuelve a funcionar con reinicios normales, se reinicia el servicio de visión desde la Vision Unit usando consola SSH.</p>
        </div>
      </div>
      <div class="tags">
        <span class="tag warn">Severidad: Media</span>
        <span class="tag">Categoría: Visión</span>
      </div>
    </summary>

    <div class="content">

      <div class="block">
        <h4>Descripción / explicación</h4>
        <p>
          El uso de <b>PuTTY</b> (o cualquier consola <b>SSH</b>) es fundamental para la gestión técnica del sistema <b>gpVision™</b>,
          porque permite el acceso remoto directo a las <b>Vision Units</b>, que son las computadoras industriales encargadas de
          procesar las imágenes de cada carril.
          <br><br>
          Esta herramienta se utiliza para <b>recuperar la operatividad de cámaras/carriles</b> sin un apagado físico, ejecutando comandos
          directamente en el sistema operativo de la Vision Unit. Es especialmente útil cuando un problema con las cámaras no se puede
          solucionar de manera convencional desde la interfaz (Simple GUI).
          <br><br>
          <b>¿Por qué se usa PuTTY en estos casos?</b>
          <br>
          • <b>Reinicio de servicios sin detener la línea:</b> permite reiniciar servicios de visión específicos que pueden haberse bloqueado,
          intentando recuperar un carril con falla sin detener completamente la operación.
          <br>
          • <b>Resolución de errores de adquisición y sincronía:</b> se usa cuando aparecen fallas como <b>errores persistentes de buffer</b>
          (memoria de procesamiento saturada), <b>pérdida de sincronización</b> (captura no coincide con el paso de la fruta) o <b>desconexión lógica</b>
          (el software deja de reconocer la cámara aunque esté conectada físicamente).
          <br>
          • <b>Diagnóstico avanzado y mantenimiento:</b> permite verificar procesos internos, monitorear CPU/memoria y revisar logs locales
          para definir si la falla es de software o de hardware (cables, switches, etc.).
          <br>
          • <b>Soporte remoto eficiente:</b> facilita que soporte GP Graders o técnicos especializados intervengan sin estar frente a la máquina,
          reduciendo tiempos de inactividad durante la temporada.
        </p>
      </div>

      <div class="block">
        <h4>Imagen de referencia</h4>
        <p>
          Coloca una captura/foto de: configuración de PuTTY (IP de la VU), ventana de consola conectada, o mensaje de error del carril.
        </p>
        <div class="ph">IMAGEN: CONEXIÓN SSH / CONSOLA PuTTY / ERROR DE CÁMARA</div>
      </div>

      <div class="block">
        <h4>Solución paso a paso</h4>
        <ol class="steps">
          <li><b>Abrir PuTTY</b> (programa para conectarse a la Vision Unit sin enchufar pantalla/teclado).</li>
          <li><b>Conectarse a la Vision Unit</b> correspondiente: en este caso <b>VU 7–8</b> (según configuración de la planta).</li>
          <li>En la consola, cuando pida usuario/login, escribir (tal cual): <b>gbk</b> y presionar <b>Enter</b>.</li>
          <li>Cuando pida contraseña, escribir: <b>gbkngpg</b> y presionar <b>Enter</b>.
            <br><i>Nota:</i> la contraseña <b>no se verá</b> mientras la escribes. Es normal.</li>
          <li>Ya dentro de la Vision Unit, ejecutar el comando (respetando mayúsculas/minúsculas):
            <br><b>killall VisionUnit</b>
          </li>
          <li>Presionar <b>Enter</b>. Esto apagará momentáneamente la visión de <b>VU 7 y 8</b>, pero debería volver a levantarse automáticamente.</li>
          <li><b>Validación:</b> volver a la interfaz (Simple GUI) y confirmar que las cámaras/carriles vuelven a entregar imagen y estado normal.</li>
          <li><b>Finalizar:</b> cerrar la ventana negra (consola) cuando el carril ya esté operativo.</li>
        </ol>
      </div>

    </div>
  </details>

  <!-- ========================= -->
  <!-- FICHA 2 (PLANTILLA) -->
  <!-- ========================= -->
  <details class="trouble">
    <summary>
      <div class="sum-left">
        <div class="badge">2</div>
        <div>
          <p class="sum-title"><b>[NOMBRE DEL PROBLEMA]</b></p>
          <p class="sum-mini">[Síntoma principal / mensaje de error / falla visible]</p>
        </div>
      </div>
      <div class="tags">
        <span class="tag bad">Severidad: Alta</span>
        <span class="tag">Categoría: Hardware</span>
      </div>
    </summary>

    <div class="content">

      <div class="block">
        <h4>Descripción / explicación</h4>
        <p>
          TEXTO A COMPLETAR: explicación del problema, cuándo aparece y qué lo provoca
          (ej: cableado, alimentación, temperatura, red, etc.).
        </p>
      </div>

      <div class="block">
        <h4>Imagen de referencia</h4>
        <p>Foto/captura que muestre el punto exacto del problema.</p>
        <div class="ph">IMAGEN GUÍA / CAPTURA DEL PROBLEMA</div>
      </div>

      <div class="block">
        <h4>Solución paso a paso</h4>
        <ol class="steps">
          <li>PASO 1: [acción concreta]</li>
          <li>PASO 2: [verificación / prueba]</li>
          <li>PASO 3: [ajuste recomendado]</li>
          <li>PASO 4: [validación final]</li>
        </ol>
      </div>

    </div>
  </details>

</main>

<footer>
  Corrección de errores · GP Graders · Documentación técnica interna
</footer>

<script>
  // ====== REVEAL (hero + guía + buscador + fichas) ======
  (function(){
    const targets = document.querySelectorAll(".hero, .status-guide, .search-wrap, details.trouble");
    if(!targets.length) return;

    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          e.target.classList.add("reveal");
          io.unobserve(e.target);
        }
      });
    }, { threshold: 0.14 });

    targets.forEach((el, i)=>{
      // stagger suave en fichas
      if(el.matches("details.trouble")){
        el.style.transitionDelay = `${Math.min(i * 70, 420)}ms`;
      }
      io.observe(el);
    });
  })();

  // ====== BUSCADOR + AUTOCOMPLETE (CORRECCIÓN DE ERRORES) ======
  const searchInput = document.getElementById("searchInput");
  const suggestList = document.getElementById("suggestList");
  const searchBtn = document.getElementById("searchBtn");
  const clearBtn = document.getElementById("clearSearchBtn");
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");
  const meta = document.getElementById("searchMeta");

  const cards = Array.from(document.querySelectorAll("details.trouble"));

  let hits = [];
  let activeIndex = -1;

  // Autocomplete index
  let indexItems = []; // { id, text, el }   el = details.trouble
  let suggestActive = -1;
  const MAX_SUGGEST = 8;

  const SKIP_TAGS = new Set(["SCRIPT","STYLE","INPUT","TEXTAREA","BUTTON","IFRAME","MARK"]);

  function escapeRegExp(str){
    return str.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
  }

  function norm(s){
    return (s || "")
      .toString()
      .toLowerCase()
      .normalize("NFD").replace(/[\u0300-\u036f]/g,"") // quita tildes
      .trim();
  }

  function buildCardText(card){
    const title = card.querySelector(".sum-title")?.innerText || "";
    const mini  = card.querySelector(".sum-mini")?.innerText || "";
    const tags  = Array.from(card.querySelectorAll(".tag")).map(t => t.innerText).join(" ");
    const body  = card.querySelector(".content")?.innerText || "";
    return [title, mini, tags, body].join(" ");
  }

  function clearMarks(scope){
    (scope || document).querySelectorAll("mark.gp-hit").forEach(m => {
      const t = document.createTextNode(m.textContent);
      m.replaceWith(t);
    });
  }

  function setActive(idx){
    if(!hits.length) return;
    hits.forEach(h => h.classList.remove("active"));
    activeIndex = (idx + hits.length) % hits.length;
    hits[activeIndex].classList.add("active");
    hits[activeIndex].scrollIntoView({ behavior:"smooth", block:"center" });
    meta.textContent = `Coincidencias: ${hits.length} · Mostrando ${activeIndex + 1}/${hits.length}`;
  }

  // Resalta SOLO dentro de la ficha objetivo (details)
  function highlightInCard(card, term){
    if(!card) return;
    clearMarks(card);
    hits = [];
    activeIndex = -1;

    if(!term){
      meta.textContent = "Sin búsqueda activa.";
      return;
    }

    const rx = new RegExp(escapeRegExp(term), "gi");

    // Sólo dentro del contenido de la ficha (evita romper summary)
    const root = card.querySelector(".content") || card;

    const walker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, {
      acceptNode(node){
        if(!node.nodeValue || !node.nodeValue.trim()) return NodeFilter.FILTER_REJECT;
        const p = node.parentElement;
        if(!p) return NodeFilter.FILTER_REJECT;
        if(SKIP_TAGS.has(p.tagName)) return NodeFilter.FILTER_REJECT;
        return NodeFilter.FILTER_ACCEPT;
      }
    });

    const nodes = [];
    while(walker.nextNode()) nodes.push(walker.currentNode);

    nodes.forEach(node => {
      const txt = node.nodeValue;
      if(!rx.test(txt)) return;

      rx.lastIndex = 0;
      const frag = document.createDocumentFragment();
      let last = 0;
      let m;

      while((m = rx.exec(txt)) !== null){
        const start = m.index;
        const end = start + m[0].length;

        if(start > last) frag.appendChild(document.createTextNode(txt.slice(last, start)));

        const mark = document.createElement("mark");
        mark.className = "gp-hit";
        mark.textContent = txt.slice(start, end);
        frag.appendChild(mark);

        last = end;
      }

      if(last < txt.length) frag.appendChild(document.createTextNode(txt.slice(last)));
      node.parentNode.replaceChild(frag, node);
    });

    hits = Array.from(card.querySelectorAll("mark.gp-hit"));
    if(hits.length){
      setActive(0);
    }else{
      meta.textContent = "No se encontraron coincidencias dentro de la ficha (revisa título/tags).";
    }
  }

  // Salta a la ficha (details) y la abre
  function jumpToCard(card, query){
    if(!card) return;

    // Abre la ficha y cierra otras (opcional, pero se ve mejor)
    cards.forEach(c => { if(c !== card) c.open = false; });
    card.open = true;

    card.scrollIntoView({ behavior:"smooth", block:"start" });

    // Resalta dentro de la ficha
    highlightInCard(card, query);

    hideSuggest();
  }

  // ====== AUTOCOMPLETE: construir índice basado en fichas ======
  function buildIndex(){
    indexItems = cards.map((card, i) => {
      const text = buildCardText(card);
      const title = (card.querySelector(".sum-title")?.innerText || "").trim();
      const id = card.querySelector(".badge")?.innerText?.trim() || String(i+1);
      const display = title ? `${id}. ${title}` : `${id}. Ficha`;
      return { id: `tr-${i}`, text: text, display, el: card };
    });
  }

  function scoreMatch(query, text){
    const q = norm(query);
    const t = norm(text);
    if(!q) return -1;
    const idx = t.indexOf(q);
    if(idx === -1) return -1;

    let score = 0;
    if(idx === 0) score += 6;
    score += Math.max(0, 5 - Math.min(idx, 5));
    score += Math.min(q.length / 4, 4);
    return score;
  }

  function hiText(text, query){
    const q = query.trim();
    if(!q) return text;
    const rx = new RegExp(escapeRegExp(q), "ig");
    return text.replace(rx, (m)=>`<span class="suggest-hi">${m}</span>`);
  }

  function hideSuggest(){
    suggestList.style.display = "none";
    suggestList.innerHTML = "";
    suggestActive = -1;
  }

  function showSuggest(items, query){
    if(!items.length){
      hideSuggest();
      return;
    }
    suggestList.innerHTML = items.map((it, idx) => {
      const line = it.display.length > 120 ? it.display.slice(0, 120) + "…" : it.display;
      return `
        <div class="suggest-item" data-idx="${idx}">
          <div class="suggest-title">${hiText(line, query)}</div>
        </div>
      `;
    }).join("");
    suggestList.style.display = "block";
  }

  function getSuggestions(query){
    const q = query.trim();
    if(q.length < 1) return [];

    const ranked = indexItems
      .map(it => ({ it, s: scoreMatch(q, it.text) }))
      .filter(x => x.s >= 0)
      .sort((a,b) => b.s - a.s)
      .slice(0, MAX_SUGGEST)
      .map(x => x.it);

    return ranked;
  }

  // ====== EVENTOS ======
  buildIndex();

  searchInput?.addEventListener("input", () => {
    const q = searchInput.value;
    const suggestions = getSuggestions(q);
    showSuggest(suggestions, q);
  });

  // click en sugerencias
  suggestList?.addEventListener("click", (e) => {
    const item = e.target.closest(".suggest-item");
    if(!item) return;
    const q = searchInput.value.trim();
    const suggestions = getSuggestions(q);
    const idx = Number(item.dataset.idx);
    const it = suggestions[idx];
    if(it) jumpToCard(it.el, q);
  });

  // navegación teclado (flechas + enter)
  searchInput?.addEventListener("keydown", (e)=>{
    const q = searchInput.value.trim();
    const suggestions = getSuggestions(q);
    if(!suggestions.length) return;

    const items = Array.from(suggestList.querySelectorAll(".suggest-item"));

    if(e.key === "ArrowDown"){
      e.preventDefault();
      suggestActive = (suggestActive + 1) % items.length;
      items.forEach(x => x.classList.remove("active"));
      items[suggestActive].classList.add("active");
      items[suggestActive].scrollIntoView({ block:"nearest" });
    }
    if(e.key === "ArrowUp"){
      e.preventDefault();
      suggestActive = (suggestActive - 1 + items.length) % items.length;
      items.forEach(x => x.classList.remove("active"));
      items[suggestActive].classList.add("active");
      items[suggestActive].scrollIntoView({ block:"nearest" });
    }
    if(e.key === "Enter"){
      if(suggestActive >= 0 && suggestions[suggestActive]){
        e.preventDefault();
        jumpToCard(suggestions[suggestActive].el, q);
      }else{
        const best = suggestions[0];
        if(best) jumpToCard(best.el, q);
        hideSuggest();
      }
    }
    if(e.key === "Escape"){
      hideSuggest();
    }
  });

  // click fuera: cerrar lista
  document.addEventListener("click", (e)=>{
    const wrap = e.target.closest("#buscador");
    if(!wrap) hideSuggest();
  });

  // botón buscar: salta a la mejor ficha
  searchBtn?.addEventListener("click", () => {
    const q = searchInput.value.trim();
    if(!q){
      meta.textContent = "Sin búsqueda activa.";
      hideSuggest();
      return;
    }
    const suggestions = getSuggestions(q);
    if(suggestions.length){
      jumpToCard(suggestions[0].el, q);
    }else{
      meta.textContent = "No se encontraron coincidencias.";
    }
    hideSuggest();
  });

  // Prev / Next: recorre los hits DENTRO de la ficha abierta
  nextBtn?.addEventListener("click", ()=> setActive(activeIndex + 1));
  prevBtn?.addEventListener("click", ()=> setActive(activeIndex - 1));

  clearBtn?.addEventListener("click", ()=>{
    searchInput.value = "";
    cards.forEach(c => clearMarks(c));
    hits = [];
    activeIndex = -1;
    meta.textContent = "Sin búsqueda activa.";
    hideSuggest();
  });
</script>

</body>
</html>
