<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Simple GUI | Manual de Operaci√≥n</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    :root{
      --bg0:#070e18;
      --bg2:#0f1e33;
      --panel: rgba(255,255,255,.04);
      --stroke: rgba(255,255,255,.10);
      --text:#eaf1ff;
      --muted:#b9c6e3;
      --brand:#4da3ff;
      --brand2:#38d4ff;
      --shadow: 0 16px 50px rgba(0,0,0,.45);
      --r20:20px;
      --card: rgba(255,255,255,.04); 
      --r: 16px;                    
    }


    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family:"Segoe UI", Tahoma, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 500px at 15% 10%, rgba(77,163,255,.18), transparent 60%),
        radial-gradient(900px 600px at 80% 90%, rgba(77,163,255,.10), transparent 55%),
        linear-gradient(135deg, var(--bg0), var(--bg2));
    }

    header{
      position:sticky;
      top:0;
      background:rgba(8,14,24,.9);
      border-bottom:1px solid rgba(255,255,255,.08);
      z-index:10;
    }

    header .wrap{
      max-width:1100px;
      margin:auto;
      padding:14px 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
    }

    header h1{
      margin:0;
      font-size:16px;
    }

    header span{
      font-size:12px;
      color:var(--muted);
    }

    .btn{
      padding:9px 14px;
      border-radius:12px;
      text-decoration:none;
      font-weight:700;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.04);
      color:var(--text);
    }

    .btn.primary{
  border-color: rgba(77,163,255,.55);
  background: linear-gradient(180deg, rgba(77,163,255,.18), rgba(56,212,255,.12));
}
.btn.primary:hover{
  border-color: rgba(77,163,255,.85);
}

    main{
      max-width:1100px;
      margin:auto;
      padding:26px 18px 50px;
    }

    /* ===== SECTIONS ===== */
    .section{
      margin-top:40px;
    }

    .section-title{
      display:flex;
      align-items:center;
      gap:12px;
      margin-bottom:8px;
    }

    .bar{
      width:10px;
      height:22px;
      border-radius:8px;
      background:linear-gradient(180deg,var(--brand),var(--brand2));
    }

    .section-title h2{
      margin:0;
      font-size:18px;
    }

    .section-sub{
      font-size:13px;
      color:var(--muted);
      margin-bottom:18px;
      max-width:850px;
    }

    /* ===== FIGURE BLOCK ===== */
    .figure{
      background:var(--panel);
      border:1px solid var(--stroke);
      border-radius:var(--r20);
      box-shadow:var(--shadow);
      margin-bottom:20px;
    }

    .figure-h{
      padding:14px 16px;
      border-bottom:1px solid rgba(255,255,255,.08);
    }

    .figure-h h3{
      margin:0;
      font-size:14px;
    }

    .figure-h .hint{
      font-size:12px;
      color:var(--muted);
      margin-top:4px;
    }

    .ph{
      height:220px;
      margin:14px 16px;
      border-radius:16px;
      border:2px dashed rgba(255,255,255,.25);
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      font-size:12px;
      color:rgba(255,255,255,.6);
    }

    .figure-b{
      padding:0 16px 16px;
      font-size:13px;
      color:var(--muted);
      line-height:1.55;
    }

    footer{
      text-align:center;
      font-size:12px;
      color:rgba(255,255,255,.4);
      padding:20px;
    }
    /* ===== BUSCADOR ===== */
.search-wrap{
  margin-top: 14px;
  background: var(--card);
  border: 1px solid var(--stroke);
  border-radius: var(--r);
  box-shadow: var(--shadow);
  overflow: visible;
}
.search-head{
  padding: 14px 16px;
  border-bottom: 1px solid rgba(255,255,255,.10);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
}
.search-head h3{
  margin:0;
  font-size: 14px;
}
.search-head .hint{
  margin-top: 4px;
  font-size: 12px;
  color: var(--muted);
}
.search-body{
  padding: 14px 16px 16px;
}
.search-row{
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap: wrap;
}
.search-input{
  flex: 1;
  min-width: 220px;
  padding: 12px 12px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(0,0,0,.22);
  color: var(--text);
  outline: none;
}
.search-input:focus{
  border-color: rgba(77,163,255,.55);
}
.search-meta{
  margin-top: 10px;
  font-size: 12px;
  color: rgba(230,237,245,.60);
}

/* resaltado */
mark.gp-hit{
  background: rgba(77,163,255,.25);
  border: 1px solid rgba(77,163,255,.35);
  color: var(--text);
  padding: 0 2px;
  border-radius: 6px;
}
mark.gp-hit.active{
  background: rgba(77,163,255,.45);
  border-color: rgba(77,163,255,.75);
  box-shadow: 0 0 0 6px rgba(77,163,255,.14);
}

/* ===== AUTOCOMPLETE LIST ===== */
.search-suggest{
  position: relative;
  flex: 1;
  min-width: 220px;
}
.search-suggest .search-input{
  width: 100%;
}

.suggest-list{
  position: absolute;
  top: calc(100% + 8px);
  left: 0;
  right: 0;
  background: rgba(10,20,34,.98);
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 14px;
  box-shadow: 0 18px 60px rgba(0,0,0,.55);
  overflow: hidden;
  z-index: 999;
  max-height: 280px;
  overflow-y: auto;
  display: none;
}

.suggest-item{
  padding: 10px 12px;
  cursor: pointer;
  border-top: 1px solid rgba(255,255,255,.08);
}
.suggest-item:first-child{ border-top: none; }
.suggest-item:hover,
.suggest-item.active{
  background: rgba(77,163,255,.12);
}
.suggest-title{
  font-size: 13px;
  color: rgba(230,237,245,.92);
  line-height: 1.35;
}

.suggest-hi{
  background: rgba(77,163,255,.22);
  border: 1px solid rgba(77,163,255,.35);
  padding: 0 2px;
  border-radius: 6px;
}

.text-block{
  max-width: 900px;
  font-size: 14px;
  line-height: 1.7;
  color: var(--text);
}

.text-block p{
  margin: 0 0 14px;
}

.img-figure{
  width: 80%;              /* ‚¨Ö un poco m√°s peque√±a */
  max-width: 900px;        /* ‚¨Ö evita que se vean gigantes en pantallas grandes */
  margin:14px auto;        /* ‚¨Ö centra la imagen */
  border-radius:16px;
  border:1px solid rgba(255,255,255,.12);
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
  display:block;
}

.img-figure{
  margin:14px auto;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.12);
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
  display:block;
}

.img-figure.xs{ width:25%; }
.img-figure.s{ width:35%; }
.img-figure.ss{ width:50%; }
.img-figure.sm{ width:75%; }
.img-figure.md{ width:85%; }
.img-figure.lg{ width:95%; }

/* =========================
   ANIMACIONES / INTERACCIONES
   ========================= */

/* scroll suave al hacer click en anchors */
html{ scroll-behavior:smooth; }

/* transiciones globales suaves */
.btn, .figure, .search-wrap, .suggest-item, .img-figure{
  transition: transform .18s ease, border-color .18s ease, background .18s ease, box-shadow .18s ease, opacity .18s ease, filter .18s ease;
}

/* Botones m√°s ‚Äúvivos‚Äù */
.btn:hover{
  transform: translateY(-1px);
  box-shadow: 0 14px 30px rgba(0,0,0,.28);
}
.btn:active{
  transform: translateY(0px) scale(.98);
}

/* Tarjetas/figuras: hover con brillo y elevaci√≥n */
.figure{
  position: relative;
  overflow: hidden;
  will-change: transform;
}
.figure:hover{
  transform: translateY(-3px);
  border-color: rgba(77,163,255,.40);
  box-shadow: 0 18px 60px rgba(0,0,0,.55);
}

/* Shine sutil al pasar el mouse */
.figure::after{
  content:"";
  position:absolute;
  inset:-40% -60%;
  background: linear-gradient(120deg,
    transparent 0%,
    rgba(77,163,255,.08) 35%,
    rgba(56,212,255,.10) 50%,
    rgba(77,163,255,.08) 65%,
    transparent 100%
  );
  transform: translateX(-35%) rotate(8deg);
  opacity: 0;
  pointer-events:none;
  transition: opacity .18s ease;
}
.figure:hover::after{
  opacity: 1;
  animation: gpShine 1.2s ease forwards;
}

@keyframes gpShine{
  0%{ transform: translateX(-35%) rotate(8deg); }
  100%{ transform: translateX(35%) rotate(8deg); }
}

/* Im√°genes: hover zoom sutil + foco accesible */
.img-figure:hover{
  transform: scale(1.02);
  filter: saturate(1.03);
}
.img-figure:active{
  transform: scale(1.00);
}

/* T√≠tulos: animaci√≥n ligera al hover */
.figure-h h3{
  transition: transform .18s ease, letter-spacing .18s ease;
}
.figure:hover .figure-h h3{
  transform: translateX(2px);
  letter-spacing: .2px;
}

/* Autocomplete: interacci√≥n m√°s notoria */
.suggest-item{
  transform: translateY(0);
}
.suggest-item:hover{
  transform: translateY(-1px);
  border-color: rgba(77,163,255,.25);
}

/* Respeta gente con reduce motion */
@media (prefers-reduced-motion: reduce){
  *{ animation: none !important; transition: none !important; }
  html{ scroll-behavior:auto; }
}

/* Reveal */
.gp-reveal{
  opacity: 0;
  transform: translateY(10px);
}
.gp-reveal.is-in{
  opacity: 1;
  transform: translateY(0);
  transition: opacity .45s ease, transform .45s ease;
}

.btn:focus-visible,
.search-input:focus-visible{
  outline: none;
  box-shadow: 0 0 0 6px rgba(77,163,255,.18);
  border-color: rgba(77,163,255,.65);
}

  </style>
</head>

<body>

<header>
  <div class="wrap">
    <div>
      <h1>Simple GUI ‚Äì Manual de Operaci√≥n</h1>
      <span>Interfaz simplificada ¬∑ Enfoque operador</span>
    </div>
    <a href="menu.html" class="btn">‚¨Ö Volver al men√∫</a>
  </div>
</header>

<main>

  <section class="search-wrap" id="buscador">
  <div class="search-head">
    <div>
      <h3>B√∫squeda r√°pida en el manual</h3>
      <div class="hint">Busca por palabra o frase y salta entre coincidencias</div>
    </div>
    <button class="btn" id="clearSearchBtn" type="button">Limpiar</button>
  </div>

  <div class="search-body">
    <div class="search-row">

      <div class="search-suggest">
  <input class="search-input" id="searchInput" type="text" autocomplete="off"
    placeholder="Ej: RTUnit, calibraci√≥n, carril, licencia...">
  <div class="suggest-list" id="suggestList"></div>
</div>

      
      <button class="btn primary" id="searchBtn" type="button">Buscar</button>
      <button class="btn" id="prevBtn" type="button">‚óÄ</button>
      <button class="btn" id="nextBtn" type="button">‚ñ∂</button>
    </div>
    <div class="search-meta" id="searchMeta">Sin b√∫squeda activa.</div>
  </div>
</section>


    <section class="section" id="pdf">
  <div class="section-title">
    <div class="bar"></div>
    <h2>Manual en PDF</h2>
  </div>

  <p class="section-sub">
    Puedes abrir el PDF en una pesta√±a nueva o verlo directamente aqu√≠.
  </p>

  <div class="figure">
    <div class="figure-h">
      <h3>Visor del manual</h3>
      <div class="hint">Si no se carga, usa el bot√≥n para abrirlo en otra pesta√±a</div>
    </div>

    <div style="padding:14px 16px;">
      <a href="Manuales/Simple GUI Manual EspanÃÉol.pdf" class="btn" target="_blank" rel="noopener">
        üìÑ Abrir PDF en otra pesta√±a
      </a>
    </div>

    <div style="padding:0 16px 16px;">
      <iframe
        src="Manuales/Simple GUI Manual EspanÃÉol.pdf"
        title="Manual gpVision PDF"
        style="width:100%; height:70vh; border:1px solid rgba(255,255,255,.12); border-radius:16px; background:rgba(255,255,255,.02);"
      ></iframe>
    </div>
  </div>
</section>

  <!-- ================================================= -->
  <!-- 1. INTRODUCCI√ìN -->
  <!-- ================================================= -->
<section class="section" id="introduccion">
  <div class="section-title">
    <div class="bar"></div>
    <h2>1. Introducci√≥n</h2>
  </div>

  <p class="section-sub">
    Descripci√≥n general de la interfaz Simple GUI y su rol dentro de la operaci√≥n
    del sistema GP Graders.
  </p>

  <div class="text-block">
    <p>
      La GUI simple de GP Graders proporciona una interfaz f√°cil de usar para configurar
      y monitorear su m√°quina GP Graders.
    </p>

    <p>
      La GUI simple le permite configurar sus programas de calificaci√≥n, clases de
      calificaci√≥n y salidas mediante pantallas intuitivas y f√°ciles de usar.
      Se accede a todas las funciones a trav√©s de la pantalla del Panel de control.
    </p>
  </div>
</section>

<!-- ================================================= -->
<!-- 1. EL TABLERO -->
<!-- ================================================= -->
<section class="section" id="tablero">
  <div class="section-title">
    <div class="bar"></div>
    <h2>1. EL TABLERO</h2>
  </div>

  <div class="figure">
    <div class="figure-h">
      <h3>Panel de interfaz gr√°fica de usuario sencillo</h3>
      <div class="hint">Vista general del Panel y sus √°reas principales</div>
    </div>

    <div class="figure-b">

      <img src="Imagenes/Captura de pantalla_26-12-2025_195555_127.0.0.1.jpeg" alt="Pruebas de salida del sistema" class="img-figure sm">

      <p>
        El Panel est√° dividido en muchas √°reas que muestran el estado actual de su m√°quina calificadora
        y brinda acceso a las otras pantallas en la GUI simple.
      </p>

      <p>
        A continuaci√≥n se describe una descripci√≥n general de la funcionalidad del Panel:
      </p>

      <ol>
        <li>El Programa de Calificaci√≥n actual, haga clic para elegir otro Programa de Calificaci√≥n.</li>
        <li>Producci√≥n: esta es la producci√≥n actual de su m√°quina medida en kilogramos o libras por hora.</li>
        <li>Velocidad de la taza: la cantidad de tazas por segundo que se califican actualmente.</li>
        <li>Llenado de carga: la carga total de productos que se clasifican expresada como porcentaje.</li>
        <li>Configuraci√≥n de Clase: acceso a la pantalla de Configuraci√≥n de Clase.</li>
        <li>Configuraci√≥n por lotes: acceso a la pantalla Configuraci√≥n por lotes.</li>
        <li>
          Salidas: una lista de las salidas disponibles y las clases de calificaci√≥n dirigidas a esas salidas.
          Haga clic en el t√≠tulo para acceder a la distribuci√≥n de salida o seleccione una salida para cargarla
          en el editor de salidas.
        </li>
        <li>Selector de lotes: haga clic en el t√≠tulo para cambiar el lote.</li>
        <li>Estado: haga clic para mostrar los mensajes de estado del sistema.</li>
        <li>Soporte remoto: haga clic para acceder al soporte en l√≠nea de GP Graders.</li>
        <li>
          Configuraci√≥n: acceda a la pantalla Configuraci√≥n para configurar algunos aspectos b√°sicos del
          Interfaz gr√°fica de usuario sencilla.
        </li>
        <li>
          Resultados: una instant√°nea de los productos que se est√°n clasificando actualmente. Haga clic en el
          t√≠tulo para ver un an√°lisis m√°s detallado.
        </li>
        <li>
          Cuadro de rendimiento: una descripci√≥n general de los resultados de calificaci√≥n durante un per√≠odo
          seleccionado.
        </li>
        <li>
          Tabla de clasificaci√≥n: una descripci√≥n general de c√≥mo se han dividido los productos entre las clases.
          Haga clic en "Descripci√≥n general" para obtener una vista m√°s detallada y en Estad√≠sticas para ver
          estad√≠sticas y generar informes.
        </li>
      </ol>

    </div>
  </div>
</section>

<!-- ================================================= -->
<!-- 2. SALIR DEL EDITOR -->
<!-- ================================================= -->
<section class="section" id="editor-salida">
  <div class="section-title">
    <div class="bar"></div>
    <h2>2. Editor de salida</h2>
  </div>

  <div class="figure">
    <div class="figure-h">
      <h3>El editor de salida</h3>
      <div class="hint">Configuraci√≥n de clases, tama√±os, colores y defectos</div>
    </div>

    <div class="figure-b">

      <img src="Imagenes/Captura de pantalla_26-12-2025_195625_127.0.0.1.jpeg" alt="Editor de salida - vista general" class="img-figure sm">

      <p>
        El Editor de salida es donde podemos configurar qu√© grados de producto se env√≠an a una salida.
        Desde esta pantalla se define c√≥mo se distribuye el producto clasificado en funci√≥n de distintos
        criterios.
      </p>

      <p>Un breve resumen de sus caracter√≠sticas es:</p>

      <ol>
        <li>
          <strong>Tama√±o del producto:</strong> solo se enviar√°n a esta salida productos dentro del rango
          de tama√±o configurado.
        </li>
        <li>
          <strong>Color:</strong> solo se enviar√°n a esta salida productos dentro del espectro de color
          seleccionado.
        </li>
        <li>
          <strong>Defectos:</strong> permite habilitar o deshabilitar defectos a considerar durante la
          clasificaci√≥n. Tambi√©n pueden reordenarse para priorizar ciertos defectos sobre otros.
        </li>
        <li>
          <strong>Guardar salida como plantilla:</strong> cualquier salida puede guardarse como plantilla
          para su uso posterior.
        </li>
        <li>Acceso a la pantalla <strong>Salida dividida en defectos</strong>.</li>
        <li>Copiar esta salida al portapapeles.</li>
        <li>Pegar la salida desde el portapapeles.</li>
        <li>Guardar esta salida.</li>
        <li>Cerrar esta salida sin guardar.</li>
        <li>
          Agregar una clase de calificaci√≥n a esta salida (hasta dos clases por salida).
        </li>
        <li>Elegir la clase de calificaci√≥n para esta salida.</li>
      </ol>

      <p>
        El Editor de salida es donde podemos elegir qu√© producto se env√≠a a qu√© salida. Primero,
        seleccionamos una clase de calificaci√≥n como <em>Premium</em>, <em>Seconds</em> o <em>Waste</em>.
      </p>

      <p>
        Para esa salida, podemos definir un rango de tama√±o y un espectro de color. Si se selecciona
        <em>Seconds</em> o <em>Waste</em>, se habilita adem√°s la selecci√≥n de defectos que se utilizar√°n
        en el proceso de calificaci√≥n.
      </p>

      <p>
        En el ejemplo mostrado, se ha seleccionado un rango de tama√±o de <strong>20,7 mm a 26,9 mm</strong>
        y el color se ha dejado vac√≠o, por lo que el color no se tendr√° en cuenta para esta salida.
        En la secci√≥n de defectos se han habilitado <em>Inmaduro</em> y <em>Suave en general</em>, por lo
        que solo los productos con estos defectos ser√°n enviados a esta salida.
      </p>

      <p>
        Tenga en cuenta que las <strong>Salidas Premium</strong> no tienen defectos por definici√≥n; en
        estas salidas solo se puede ajustar el tama√±o y el color del producto.
      </p>

      <h4>Reordenamiento de defectos</h4>

      <p>
        Los defectos pueden reordenarse para modificar su prioridad. El defecto m√°s importante se coloca
        en la parte superior y el menos importante en la parte inferior. Este orden se guarda al guardar
        la salida.
      </p>

      <p>
        <strong>Nota:</strong> el orden de los defectos se aplica a todas las salidas que utilicen la misma
        clase de calificaci√≥n. Por ejemplo, si las salidas 2 y 4 son de segunda clase, el orden definido
        en la salida 2 tambi√©n se aplicar√° a la salida 4.
      </p>

      <h4>M√∫ltiples clases de calificaci√≥n en una sola salida</h4>

      <img src="Imagenes/Captura de pantalla_26-12-2025_19585_127.0.0.1.jpeg" alt="Salida multigrupo" class="img-figure sm">

      <p>
        En algunos casos, es necesario enviar dos clases de calificaci√≥n distintas a una misma salida bajo
        condiciones diferentes. Por ejemplo, ciertos productos de segunda clase pueden enviarse a la misma
        salida que productos de desecho.
      </p>

      <p>
        Para convertir una salida en una salida multigrupo, haga clic en el bot√≥n ‚Äú+‚Äù. Aparecer√° un nuevo
        grupo representado por un c√≠rculo del color de la clase de calificaci√≥n correspondiente. Cada
        c√≠rculo permite alternar entre los grupos y configurar cada clase de forma independiente.
        Al finalizar, presione el bot√≥n <strong>Guardar</strong>.
      </p>

      <h4>Salida dividida por defecto</h4>

      <img src="Imagenes/Captura de pantalla_26-12-2025_19595_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">

      <p>
        En la mayor√≠a de los casos, la distribuci√≥n de fruta se realiza utilizando la Distribuci√≥n de
        salida. Sin embargo, si se desea redirigir fruta a otra salida en funci√≥n de un defecto espec√≠fico,
        puede utilizarse la pantalla de <strong>Salidas divididas</strong>.
      </p>

      <p>
        En esta pantalla es posible dividir una salida con otra en funci√≥n de un defecto individual.
        Esto resulta √∫til cuando no se desea distribuir por clase, sino redirigir el producto √∫nicamente
        por la presencia de un defecto concreto.
      </p>

    </div>
  </div>
</section>

<!-- ================================================= -->
<!-- 3. CONFIGURACI√ìN DE CLASES -->
<!-- ================================================= -->
<section class="section" id="configuracion-clases">
  <div class="section-title">
    <div class="bar"></div>
    <h2>3. Configuraci√≥n de clases</h2>
  </div>

  <p class="section-sub">
    En esta secci√≥n se configuran los defectos y la forma en que cada defecto
    afecta a las distintas clases de calificaci√≥n.
  </p>

  <div class="figure">
    <div class="figure-h">
      <h3>Pantalla de configuraci√≥n de clase</h3>
      <div class="hint">Definici√≥n de defectos y comportamiento por clase</div>
    </div>

     <img src="Imagenes/Captura de pantalla_26-12-2025_195944_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">

    <div class="figure-b">
      <p>
        La pantalla <strong>Configuraci√≥n de clase</strong> es donde se definen los defectos
        y c√≥mo se eval√∫a la magnitud de cada defecto para cada clase de calificaci√≥n.
      </p>

      <p>Un resumen de las funciones disponibles es:</p>

      <ol>
        <li>
          <strong>Clases de calificaci√≥n:</strong> normalmente incluyen <em>Premium</em> y
          <em>Waste</em>, con la opci√≥n de agregar <em>Second Class</em> u otra clase personalizada.
        </li>
        <li>
          <strong>Agregar clase:</strong> permite a√±adir una nueva clase de calificaci√≥n.
        </li>
        <li>
          <strong>Acceso a configuraci√≥n:</strong> abre la pantalla de ajuste detallado.
        </li>
        <li>
          <strong>Lista de defectos:</strong> defectos disponibles para configurar.
        </li>
        <li>
          <strong>Icono de advertencia:</strong> indica que un defecto a√∫n no est√° configurado correctamente.
        </li>
        <li>
          <strong>Defecto personalizado:</strong> combina dos o m√°s defectos.
        </li>
        <li>
          <strong>Agregar defecto personalizado:</strong> crea un nuevo defecto combinado.
        </li>
        <li>
          <strong>√Årea de configuraci√≥n:</strong> permite ajustar el defecto seleccionado mediante
          controles deslizantes.
        </li>
      </ol>

      <p>
        Estas configuraciones permiten adaptar el programa de clasificaci√≥n a las
        caracter√≠sticas espec√≠ficas del lote de producto procesado.
      </p>
    </div>
  </div>

  <!-- ================= DEFECTOS PERSONALIZADOS ================= -->
  <div class="figure">
    <div class="figure-h">
      <h3>Defectos personalizados</h3>
      <div class="hint">Combinaci√≥n avanzada de defectos</div>
    </div>

     <img src="Imagenes/Captura de pantalla_26-12-2025_20147_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">

    <div class="figure-b">
      <p>
        Los defectos personalizados permiten combinar m√∫ltiples defectos en uno solo,
        creando una forma m√°s avanzada de detecci√≥n durante la clasificaci√≥n.
      </p>

      <p>
        En el ejemplo mostrado, los defectos <em>Dividido</em> y <em>Suave</em> se han
        combinado en un √∫nico defecto. Ambos se eval√∫an simult√°neamente y se asignan
        a las clases correspondientes.
      </p>

      <h4>Crear un defecto personalizado</h4>

      <p>
        Para crear un defecto personalizado, presione el bot√≥n <strong>‚Äú+‚Äù</strong>
        ubicado en la parte inferior de la lista de defectos. Luego, asigne un nombre
        y seleccione los defectos que desea combinar.
      </p>

       <img src="Imagenes/Captura de pantalla_26-12-2025_20225_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure ss">

      <p>
        Una vez guardado, el defecto personalizado puede configurarse como cualquier
        otro defecto est√°ndar y seleccionarse en el Editor de salida.
      </p>
    </div>
  </div>

  <!-- ================= GRUPOS FUSIONADOS ================= -->
  <div class="figure">
    <div class="figure-h">
      <h3>Grupos fusionados</h3>
      <div class="hint">Unificaci√≥n de comportamiento entre clases</div>
    </div>

     <img src="Imagenes/Captura de pantalla_26-12-2025_20246_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure s">

    <div class="figure-b">
      <p>
        Los grupos fusionados permiten asignar el mismo tratamiento a m√∫ltiples clases
        de calificaci√≥n. Por ejemplo, se puede definir un valor para productos Premium
        y aplicar ese mismo criterio a <em>Second Class</em> y <em>Waste</em>.
      </p>

      <p>
        Esta opci√≥n es √∫til cuando se desea identificar productos que simplemente
        <strong>no cumplen con el est√°ndar Premium</strong>, sin diferenciarlos
        individualmente entre segundos o desperdicio.
      </p>
    </div>
  </div>

  <!-- ================= CONFIGURACI√ìN DE ESPECTROS ================= -->
  <div class="figure">
    <div class="figure-h">
      <h3>Configuraci√≥n de espectros de color</h3>
      <div class="hint">Definici√≥n avanzada de rangos HSV</div>
    </div>

     <img src="Imagenes/Captura de pantalla_26-12-2025_20355_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">

    <div class="figure-b">
      <p>
        Si se ha seleccionado la <strong>Rueda de color HSV</strong> en la Configuraci√≥n
        avanzada, ser√° posible crear espectros de color personalizados.
      </p>

      <ol>
        <li>Colores con nombre (por ejemplo, Rojo o Verde).</li>
        <li>Agregar nuevos colores con nombre.</li>
        <li>Visualizaci√≥n detallada del espectro configurado.</li>
        <li>Guardar la configuraci√≥n de espectros.</li>
      </ol>

      <p>
        Los espectros pueden renombrarse o eliminarse directamente desde la rueda
        de colores. Una vez creados, estar√°n disponibles en el Editor de salida.
      </p>

       <img src="Imagenes/Captura de pantalla_26-12-2025_20447_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">
    </div>
  </div>

  <!-- ================= TAMA√ëOS Y COLORES PREDEFINIDOS ================= -->
  <div class="figure">
    <div class="figure-h">
      <h3>Tama√±os y colores predefinidos</h3>
      <div class="hint">Consistencia en la configuraci√≥n</div>
    </div>

        <img src="Imagenes/Captura de pantalla_26-12-2025_2059_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">

    <div class="figure-b">
      <p>
        Los tama√±os y colores predefinidos se configuran desde Configuraci√≥n de clases
        y permiten mantener rangos consistentes en todas las salidas.
      </p>
        <img src="Imagenes/Captura de pantalla_26-12-2025_20132_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">
      <p>
        Puede crear tantos tama√±os y colores como desee. Una vez definidos,
        estar√°n disponibles en el Editor de salida y en otras √°reas del sistema.
      </p>
        <img src="Imagenes/Captura de pantalla_26-12-2025_201334_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">
      <p>
        Esto facilita la configuraci√≥n r√°pida de salidas y asegura coherencia
        en los criterios de clasificaci√≥n.
        <img src="Imagenes/Captura de pantalla_26-12-2025_20143_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">
      </p>
    </div>
  </div>

</section>

<!-- ================================================= -->
<!-- 4. RESULTADOS -->
<!-- ================================================= -->
<section class="section" id="resultados">
  <div class="section-title">
    <div class="bar"></div>
    <h2>4. Resultados</h2>
  </div>

  <p class="section-sub">
    Visualizaci√≥n detallada de los productos recientemente clasificados y de los
    defectos detectados por el sistema.
  </p>

  <div class="figure">
    <div class="figure-h">
      <h3>Vista de resultados</h3>
      <div class="hint">An√°lisis visual del producto clasificado</div>
    </div>

     <img src="Imagenes/Captura de pantalla_26-12-2025_201534_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">

    <div class="figure-b">
      <p>
        La pantalla <strong>Resultados</strong> permite al operador revisar en detalle
        d√≥nde y c√≥mo se ha detectado un defecto en una fruta recientemente clasificada.
      </p>

      <p>Esta pantalla ofrece las siguientes funciones principales:</p>

      <ol>
        <li>
          <strong>Lista de frutas recientes:</strong> muestra las cinco frutas m√°s
          recientes que han sido calificadas.
        </li>
        <li>
          <strong>Im√°genes del producto:</strong> visualizaci√≥n de la fruta seleccionada
          desde todos los √°ngulos de rotaci√≥n disponibles.
        </li>
        <li>
          <strong>Defectos detectados:</strong> indica la cantidad de defectos encontrados
          en la fruta seleccionada. Cuando aparece un icono de c√°mara, existe una imagen
          asociada al defecto.
        </li>
        <li>
          <strong>Resaltado del defecto:</strong> el √°rea detectada como defecto se
          muestra delineada en color verde sobre la imagen.
        </li>
        <li>
          <strong>C√°mara a color:</strong> permite visualizar la imagen proveniente de
          la c√°mara RGB.
        </li>
        <li>
          <strong>C√°mara infrarrojo cercano (NIR):</strong> muestra la imagen capturada
          por la c√°mara de infrarrojo cercano.
        </li>
        <li>
          <strong>C√°mara Shrivel:</strong> selecciona la c√°mara dedicada a la detecci√≥n
          de encogimiento o textura.
        </li>
        <li>
          <strong>Ampliaci√≥n:</strong> permite hacer zoom sobre la imagen para un an√°lisis
          m√°s detallado.
        </li>
        <li>
          <strong>Exportar resultados:</strong> exporta la informaci√≥n y las im√°genes
          asociadas a un archivo para an√°lisis posterior.
        </li>
      </ol>

      <p>
        La pantalla de Resultados ofrece una <strong>instant√°nea precisa</strong> del
        proceso de clasificaci√≥n, permitiendo al operador validar visualmente las
        decisiones tomadas por el sistema GP Vision.
      </p>
    </div>
  </div>

</section>

<!-- ================================================= -->
<!-- 5. DISTRIBUCI√ìN DE SALIDA -->
<!-- ================================================= -->
<section class="section" id="distribucion-salida">
  <div class="section-title">
    <div class="bar"></div>
    <h2>5. Distribuci√≥n de salida</h2>
  </div>

  <p class="section-sub">
    Configuraci√≥n de la distribuci√≥n del producto entre salidas id√©nticas.
  </p>

  <!-- ================= DISTRIBUCI√ìN B√ÅSICA ================= -->
  <div class="figure">
    <div class="figure-h">
      <h3>Distribuci√≥n de salida</h3>
      <div class="hint">Reparto autom√°tico del producto entre salidas id√©nticas</div>
    </div>

     <img src="Imagenes/Captura de pantalla_26-12-2025_20160_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">

    <div class="figure-b">
      <p>
        La pantalla <strong>Distribuci√≥n de salida</strong> muestra c√≥mo el producto se reparte
        entre varias salidas con par√°metros id√©nticos. En el ejemplo mostrado, dos salidas
        Premium distribuyen el <strong>50&nbsp;%</strong> del producto a cada una.
      </p>

      <p>
        Si se configuran dos o m√°s salidas con par√°metros id√©nticos, cualquier fruta que cumpla
        dichos par√°metros podr√° enviarse a cualquiera de esas salidas.
      </p>

      <p>
        De forma predeterminada, la distribuci√≥n se divide de manera uniforme. Por ejemplo,
        dos salidas id√©nticas recibir√°n cada una el 50&nbsp;% de la fruta, mientras que cuatro
        salidas id√©nticas recibir√°n el 25&nbsp;% cada una.
      </p>

      <p>
        La distribuci√≥n puede ajustarse utilizando los botones ‚Äú+‚Äù y ‚Äú‚Äì‚Äù en cada salida, en
        incrementos del 5&nbsp;%. Cuando haya finalizado el ajuste, presione el bot√≥n
        <strong>Guardar</strong> para confirmar los cambios en el programa de calificaci√≥n actual.
      </p>

      <p>
        Si la pantalla no permite distribuir entre salidas, aseg√∫rese de que las salidas sean
        completamente id√©nticas en cuanto a <strong>Clase de Calificaci√≥n, color, tama√±o y defectos</strong>.
      </p>

      <p>
        Tenga en cuenta que, si una salida deja de ser id√©ntica a las dem√°s, la distribuci√≥n
        se reajustar√° autom√°ticamente. Por ejemplo, si tres salidas estaban distribuidas en
        30&nbsp;%, 30&nbsp;% y 40&nbsp;% y una de ellas se elimina, las dos restantes se
        redistribuir√°n autom√°ticamente al 50&nbsp;% cada una.
      </p>
    </div>
  </div>

  <!-- ================= DISTRIBUCI√ìN DEL SALDO ================= -->
  <div class="figure">
    <div class="figure-h">
      <h3>Distribuci√≥n de salida del saldo</h3>
      <div class="hint">Equilibrio autom√°tico de porcentajes</div>
    </div>

     <img src="Imagenes/Captura de pantalla_26-12-2025_201623_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">

    <div class="figure-b">
      <p>
        Es importante que todas las distribuciones de salida sumen el 100&nbsp;%.
        Puede asignar manualmente los porcentajes de distribuci√≥n o permitir que la
        GUI simple equilibre la distribuci√≥n de forma uniforme entre las salidas.
      </p>
    </div>
  </div>

  <!-- ================= CAMBIO DE TAMA√ëO Y COLOR ================= -->
  <div class="figure">
    <div class="figure-h">
      <h3>Cambiar tama√±o y color de salidas distribuidas</h3>
      <div class="hint">Edici√≥n simult√°nea de m√∫ltiples salidas</div>
    </div>

     <img src="Imagenes/Captura de pantalla_26-12-2025_201732_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">

    <div class="figure-b">
      <p>
        Para garantizar que las salidas distribuidas permanezcan dentro del mismo
        conjunto de distribuci√≥n, es posible cambiar el tama√±o y/o el color de varias
        salidas al mismo tiempo.
      </p>

      <p>
        Para ello, haga clic en la muestra de color o en el tama√±o dentro de la tabla
        de Salidas y seleccione el nuevo valor. Luego haga clic en
        <strong>‚ÄúCambiar todo‚Äù</strong> para aplicar el cambio a todas las salidas del
        conjunto de distribuci√≥n.
      </p>
    </div>
  </div>

  <!-- ================= SALIDAS UNIFICADAS ================= -->
  <div class="figure">
    <div class="figure-h">
      <h3>Salidas unificadas</h3>
      <div class="hint">Tratamiento de m√∫ltiples salidas como una sola</div>
    </div>

    <img src="Imagenes/Captura de pantalla_26-12-2025_201755_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">

    <div class="figure-b">
      <p>
        Las salidas pueden unificarse para que varias salidas funcionen de forma
        efectiva como una sola, recibiendo el mismo producto con distribuci√≥n autom√°tica.
        Esta acci√≥n puede realizarse desde la pantalla de Salidas o desde el Panel de control.
      </p>

      <p>
        Para unificar salidas, haga clic derecho sobre una salida y seleccione la opci√≥n
        <strong>‚ÄúUnificar con salida‚Äù</strong>. Por ejemplo, puede unificar la Salida&nbsp;3
        con la Salida&nbsp;2.
      </p>

      <img src="Imagenes/Captura de pantalla_26-12-2025_201953_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">

      <p>
        Una vez unificadas, ambas salidas actuar√°n como una sola, con distribuci√≥n
        autom√°tica entre ellas.
      </p>

      <p>
        Tambi√©n es posible unificar m√∫ltiples salidas ingresando un rango en el √°rea
        de Distribuci√≥n. Puede utilizar comas o guiones, por ejemplo:
        <em>‚Äú3,5,7‚Äù</em> o <em>‚Äú3-7‚Äù</em>.
      </p>

       <img src="Imagenes/Captura de pantalla_26-12-2025_202255_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">
      <p>
        Dar√° el resultado de:
      </p>

<img src="Imagenes/Captura de pantalla_26-12-2025_202321_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">

            <p>
        Mientras que si ingresamos a un rango de Salidas como este:
      </p>

<img src="Imagenes/Captura de pantalla_27-12-2025_0245_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">

            <p>
        Eso dar√° el resultado de:
      </p>

<img src="Imagenes/Captura de pantalla_27-12-2025_0326_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">  

      <p>Cuando las Salidas se Unifican as√≠, la distribuci√≥n es autom√°tica</p>
    </div>
  </div>

  <!-- ================= PLANTILLAS DE SALIDA ================= -->
  <div class="figure">
    <div class="figure-h">
      <h3>Uso de plantillas de salida</h3>
      <div class="hint">Aplicaci√≥n r√°pida de configuraciones predefinidas</div>
    </div>

     <img src="Imagenes/Captura de pantalla_27-12-2025_043_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">

    <div class="figure-b">
      <p>
        Las Plantillas de salida permiten aplicar configuraciones predefinidas de forma
        r√°pida. Para utilizarlas, cambie al modo <strong>Avanzado</strong> dentro de la
        pantalla de Distribuci√≥n de salida.
      </p>

      <p>
        Una vez en modo avanzado, podr√° arrastrar y soltar cualquier plantilla sobre
        una salida para aplicarla directamente.
      </p>
    </div>
  </div>

</section>

<!-- ================================================= -->
<!-- 6. PLANTILLAS DE SALIDA -->
<!-- ================================================= -->
<section class="section" id="plantillas-salida">
  <div class="section-title">
    <div class="bar"></div>
    <h2>6. Plantillas de salida</h2>
  </div>

  <p class="section-sub">
    Reutilizaci√≥n r√°pida de configuraciones de salida previamente definidas.
  </p>

  <!-- ================= GUARDAR PLANTILLA ================= -->
  <div class="figure">
    <div class="figure-h">
      <h3>Guardar una plantilla de salida</h3>
      <div class="hint">Reutilizaci√≥n de configuraciones existentes</div>
    </div>

     <img src="Imagenes/Captura de pantalla_27-12-2025_0443_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">

    <div class="figure-b">
      <p>
        Las plantillas de salida pueden utilizarse cuando se desea reutilizar la misma
        configuraci√≥n de salida una y otra vez. Para ello, basta con guardar la salida
        que se muestra actualmente en el Editor de salida como una plantilla.
      </p>

      <p>
        Para guardar una plantilla, haga clic en el bot√≥n
        <strong>‚ÄúGuardar como plantilla‚Äù</strong>.
      </p>

      <p>
        A continuaci√≥n, deber√° ingresar un nombre para la plantilla y un nombre que se
        utilizar√° para crear la nueva salida. El nombre de la plantilla y el nombre
        sugerido de la salida son diferentes, ya que el n√∫mero de salida forma parte
        del nombre de la salida.
      </p>

      <p>
        Como regla general, puede asignar cualquier nombre a la plantilla de salida,
        pero se recomienda mantener el nombre sugerido de la salida simple y sin
        caracteres especiales.
      </p>
    </div>
  </div>

  <!-- ================= USO DE PLANTILLAS ================= -->
  <div class="figure">
    <div class="figure-h">
      <h3>Uso de plantillas de salida</h3>
      <div class="hint">Aplicaci√≥n de plantillas guardadas</div>
    </div>

     <img src="Imagenes/Captura de pantalla_27-12-2025_072_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">

    <div class="figure-b">
      <p>
        Una vez que la plantilla de salida ha sido guardada, estar√° disponible para
        aplicarse a cualquier salida dentro de la lista de salidas.
      </p>

      <p>
        Esto permite configurar nuevas salidas de forma r√°pida y consistente, sin
        necesidad de volver a definir manualmente todos los par√°metros.
      </p>
    </div>
  </div>

  <!-- ================= EDITAR PLANTILLAS ================= -->
  <div class="figure">
    <div class="figure-h">
      <h3>Editar plantillas de salida</h3>
      <div class="hint">Gesti√≥n de plantillas existentes</div>
    </div>

    <img src="Imagenes/Captura de pantalla_27-12-2025_0739_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">
    <div class="figure-b">
      <p>
        Las plantillas de salida pueden editarse seleccionando la opci√≥n
        <strong>‚ÄúVer plantillas de salida‚Äù</strong>.
      </p>

      <p>
        Desde esta vista es posible revisar, modificar o actualizar las plantillas
        existentes para adaptarlas a nuevos requerimientos de producci√≥n.
      </p>
    </div>
  </div>

</section>

<!-- ================================================= -->
<!-- 7. DESCRIPCI√ìN GENERAL -->
<!-- ================================================= -->
<section class="section" id="descripcion-general">
  <div class="section-title">
    <div class="bar"></div>
    <h2>7. Descripci√≥n general</h2>
  </div>

  <p class="section-sub">
    Vista resumida del desempe√±o de clasificaci√≥n y desglose de resultados.
  </p>

  <div class="figure">
    <div class="figure-h">
      <h3>Pantalla de descripci√≥n general</h3>
      <div class="hint">An√°lisis por clases y causas de clasificaci√≥n</div>
    </div>

    <img src="Imagenes/Captura de pantalla_27-12-2025_0843_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">

    <div class="figure-b">
      <p>
        La pantalla <strong>Descripci√≥n general</strong> se accede haciendo clic en
        <strong>‚ÄúRESUMEN‚Äù</strong>, ubicado junto al gr√°fico circular en el Panel.
      </p>

      <p>
        Esta pantalla proporciona un desglose de la cantidad de productos agrupados
        en las diferentes clases de clasificaci√≥n.
      </p>

      <p>
        El operador puede hacer clic en cualquier porci√≥n del gr√°fico circular para
        <strong>profundizar</strong> en los datos y visualizar no solo la clase de
        calificaci√≥n asignada, como por ejemplo <em>Desperdicio</em>, sino tambi√©n
        la raz√≥n por la cual el producto fue clasificado en dicha clase.
      </p>

      <p>
        En el ejemplo mostrado, una parte del producto ha sido asignada como
        desperdicio debido a la detecci√≥n del defecto <strong>‚Äúpunto d√©bil‚Äù</strong>.
      </p>
    </div>
  </div>

</section>

<!-- ================================================= -->
<!-- 8. ESTAD√çSTICAS -->
<!-- ================================================= -->
<section class="section" id="estadisticas">
  <div class="section-title">
    <div class="bar"></div>
    <h2>8. Estad√≠sticas</h2>
  </div>

  <p class="section-sub">
    Visualizaci√≥n de estad√≠sticas basadas en lotes de producci√≥n.
  </p>

  <div class="figure">
    <div class="figure-h">
      <h3>Pantalla de estad√≠sticas</h3>
      <div class="hint">Datos hist√≥ricos por lote</div>
    </div>

     <img src="Imagenes/Captura de pantalla_27-12-2025_01037_127.0.0.1.jpeg" alt="Salida dividida por defecto" class="img-figure sm">

    <div class="figure-b">
      <p>
        La pantalla <strong>Estad√≠sticas</strong> permite visualizar las estad√≠sticas
        correspondientes a los distintos lotes de producci√≥n.
      </p>

      <p>
        Esta pantalla solo se completar√° una vez que se haya comenzado a calificar
        utilizando lotes, ya que los datos estad√≠sticos se generan a partir de la
        informaci√≥n acumulada durante el proceso de clasificaci√≥n.
      </p>
    </div>
  </div>

</section>

</main>

<footer>
  Simple GUI ¬∑ Manual de operaci√≥n ¬∑ Uso interno
</footer>

<script>
  // ====== BUSCADOR + AUTOCOMPLETE ======
  const searchInput = document.getElementById("searchInput");
  const suggestList = document.getElementById("suggestList");
  const searchBtn = document.getElementById("searchBtn");
  const clearBtn = document.getElementById("clearSearchBtn");
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");
  const meta = document.getElementById("searchMeta");

  let hits = [];
  let activeIndex = -1;

  // Autocomplete index
  let indexItems = []; // { id, text, el }
  let suggestActive = -1;
  const MAX_SUGGEST = 8;

  const SKIP_TAGS = new Set(["SCRIPT","STYLE","INPUT","TEXTAREA","BUTTON","IFRAME","MARK"]);

  function escapeRegExp(str){
    return str.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
  }

  function clearMarks(){
    document.querySelectorAll("mark.gp-hit").forEach(m => {
      const t = document.createTextNode(m.textContent);
      m.replaceWith(t);
    });
    hits = [];
    activeIndex = -1;
  }

  function setActive(idx){
    if(!hits.length) return;
    hits.forEach(h => h.classList.remove("active"));
    activeIndex = (idx + hits.length) % hits.length;
    hits[activeIndex].classList.add("active");
    hits[activeIndex].scrollIntoView({ behavior:"smooth", block:"center" });
    meta.textContent = `Coincidencias: ${hits.length} ¬∑ Mostrando ${activeIndex + 1}/${hits.length}`;
  }

  function highlight(term){
    clearMarks();
    if(!term) {
      meta.textContent = "Sin b√∫squeda activa.";
      return;
    }

    const root = document.querySelector("main");
    const rx = new RegExp(escapeRegExp(term), "gi");

    const walker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, {
      acceptNode(node){
        if(!node.nodeValue || !node.nodeValue.trim()) return NodeFilter.FILTER_REJECT;
        const p = node.parentElement;
        if(!p) return NodeFilter.FILTER_REJECT;
        if(SKIP_TAGS.has(p.tagName)) return NodeFilter.FILTER_REJECT;
        return NodeFilter.FILTER_ACCEPT;
      }
    });

    const nodes = [];
    while(walker.nextNode()) nodes.push(walker.currentNode);

    nodes.forEach(node => {
      const txt = node.nodeValue;
      if(!rx.test(txt)) return;

      rx.lastIndex = 0;
      const frag = document.createDocumentFragment();
      let last = 0;
      let m;

      while((m = rx.exec(txt)) !== null){
        const start = m.index;
        const end = start + m[0].length;

        if(start > last) frag.appendChild(document.createTextNode(txt.slice(last, start)));

        const mark = document.createElement("mark");
        mark.className = "gp-hit";
        mark.textContent = txt.slice(start, end);
        frag.appendChild(mark);

        last = end;
      }

      if(last < txt.length) frag.appendChild(document.createTextNode(txt.slice(last)));

      node.parentNode.replaceChild(frag, node);
    });

    hits = Array.from(document.querySelectorAll("mark.gp-hit"));
    if(hits.length){
      setActive(0);
    }else{
      meta.textContent = "No se encontraron coincidencias.";
    }
  }

  // ====== AUTOCOMPLETE: construir √≠ndice del manual ======
  function buildIndex(){
    const root = document.querySelector("main");
    indexItems = [];

    // 1) T√≠tulos y subt√≠tulos (prioridad alta)
    root.querySelectorAll("h1,h2,h3,h4").forEach((el, i) => {
      const t = (el.innerText || "").trim();
      if(t.length >= 3) indexItems.push({ id: `h-${i}`, text: t, el });
    });

    // 2) List items (li) (√∫tiles para pasos)
    root.querySelectorAll("li").forEach((el, i) => {
      const t = (el.innerText || "").trim();
      if(t.length >= 12) indexItems.push({ id: `li-${i}`, text: t.slice(0, 220), el });
    });

    // 3) P√°rrafos importantes (opcional: recorta)
    root.querySelectorAll(".figure-b p").forEach((el, i) => {
      const t = (el.innerText || "").trim();
      if(t.length >= 18) indexItems.push({ id: `p-${i}`, text: t.slice(0, 220), el });
    });
  }

  // Normaliza para comparar
  function norm(s){
    return (s || "")
      .toLowerCase()
      .normalize("NFD").replace(/[\u0300-\u036f]/g,""); // quita tildes
  }

  function scoreMatch(query, text){
    // scoring simple: incluye, empieza, proximidad
    const q = norm(query);
    const t = norm(text);
    if(!q) return -1;
    const idx = t.indexOf(q);
    if(idx === -1) return -1;

    let score = 0;
    if(idx === 0) score += 6;          // empieza con
    score += Math.max(0, 5 - Math.min(idx, 5)); // mientras m√°s cerca del inicio mejor
    score += Math.min(q.length / 4, 4); // query m√°s larga, mejor
    return score;
  }

  function hiText(text, query){
    const q = query.trim();
    if(!q) return text;
    const rx = new RegExp(escapeRegExp(q), "ig");
    return text.replace(rx, (m)=>`<span class="suggest-hi">${m}</span>`);
  }

  function hideSuggest(){
    suggestList.style.display = "none";
    suggestList.innerHTML = "";
    suggestActive = -1;
  }

function showSuggest(items, query){
  if(!items.length){
    hideSuggest();
    return;
  }
  suggestList.innerHTML = items.map((it, idx) => {
    const line = it.text.length > 120 ? it.text.slice(0, 120) + "‚Ä¶" : it.text;
    return `
      <div class="suggest-item" data-idx="${idx}">
        <div class="suggest-title">${hiText(line, query)}</div>
      </div>
    `;
  }).join("");
  suggestList.style.display = "block";
}

  function getSuggestions(query){
    const q = query.trim();
    if(q.length < 1) return [];

    // filtra y rankea
    const ranked = indexItems
      .map(it => ({ it, s: scoreMatch(q, it.text) }))
      .filter(x => x.s >= 0)
      .sort((a,b) => b.s - a.s)
      .slice(0, MAX_SUGGEST)
      .map(x => x.it);

    return ranked;
  }

  function jumpToElement(el, query){
    if(!el) return;
    // Lleva al elemento
    el.scrollIntoView({ behavior:"smooth", block:"center" });
    // Resalta el t√©rmino en el documento
    highlight(query);
    // y activa la primera coincidencia visible
    if(hits.length) setActive(0);
    hideSuggest();
  }

  // ====== EVENTOS ======
  buildIndex();

  searchInput?.addEventListener("input", () => {
    const q = searchInput.value;
    const suggestions = getSuggestions(q);
    showSuggest(suggestions, q);
  });

  // click en sugerencias
  suggestList?.addEventListener("click", (e) => {
    const item = e.target.closest(".suggest-item");
    if(!item) return;
    const q = searchInput.value.trim();
    const suggestions = getSuggestions(q);
    const idx = Number(item.dataset.idx);
    const it = suggestions[idx];
    if(it) jumpToElement(it.el, q);
  });

  // navegaci√≥n teclado (flechas + enter)
  searchInput?.addEventListener("keydown", (e)=>{
    const q = searchInput.value.trim();
    const suggestions = getSuggestions(q);
    if(!suggestions.length) return;

    const items = Array.from(suggestList.querySelectorAll(".suggest-item"));

    if(e.key === "ArrowDown"){
      e.preventDefault();
      suggestActive = (suggestActive + 1) % items.length;
      items.forEach(x => x.classList.remove("active"));
      items[suggestActive].classList.add("active");
      items[suggestActive].scrollIntoView({ block:"nearest" });
    }
    if(e.key === "ArrowUp"){
      e.preventDefault();
      suggestActive = (suggestActive - 1 + items.length) % items.length;
      items.forEach(x => x.classList.remove("active"));
      items[suggestActive].classList.add("active");
      items[suggestActive].scrollIntoView({ block:"nearest" });
    }
    if(e.key === "Enter"){
      // Si hay item activo, salta a ese
      if(suggestActive >= 0 && suggestions[suggestActive]){
        e.preventDefault();
        jumpToElement(suggestions[suggestActive].el, q);
      }else{
        // si no, hace b√∫squeda normal
        highlight(q);
        hideSuggest();
      }
    }
    if(e.key === "Escape"){
      hideSuggest();
    }
  });

  // click fuera: cerrar lista
  document.addEventListener("click", (e)=>{
    const wrap = e.target.closest(".search-wrap");
    if(!wrap) hideSuggest();
  });

  searchBtn?.addEventListener("click", () => {
    const q = searchInput.value.trim();
    highlight(q);
    hideSuggest();
  });

  nextBtn?.addEventListener("click", ()=> setActive(activeIndex + 1));
  prevBtn?.addEventListener("click", ()=> setActive(activeIndex - 1));

  clearBtn?.addEventListener("click", ()=>{
    searchInput.value = "";
    clearMarks();
    meta.textContent = "Sin b√∫squeda activa.";
    hideSuggest();
  });

  // ===== Reveal al aparecer en pantalla =====
  (function(){
    const targets = [
      ...document.querySelectorAll(".section"),
      ...document.querySelectorAll(".figure"),
      ...document.querySelectorAll(".search-wrap")
    ];

    targets.forEach(el => el.classList.add("gp-reveal"));

    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          e.target.classList.add("is-in");
          io.unobserve(e.target);
        }
      });
    }, { threshold: 0.12 });

    targets.forEach(el => io.observe(el));
  })();

</script>


</body>
</html>
